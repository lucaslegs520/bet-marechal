<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#282c34">
    <meta name="format-detection" content="telephone=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="referrer" content="no-referrer">
    <link rel="dns-prefetch" href="//fonts.googleapis.com">
    <link rel="dns-prefetch" href="//fonts.gstatic.com">
    <title>BET MATEMATICA FAETEC</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Otimizações de performance para dispositivos móveis */
        html {
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeSpeed;
            -webkit-overflow-scrolling: touch;
        }

        /* Reduzir animações em dispositivos com preferência por movimento reduzido */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        body {
            font-family: 'Inter', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: #282c34;
            color: white;
            overflow: hidden;
            height: 100vh;
            display: flex;
            margin: 0;
            padding: 0;
        }

        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 240px;
            height: 100vh;
            background: #1a1d24;
            border-right: 1px solid #2a2d34;
            display: flex;
            flex-direction: column;
            transition: left 0.2s ease;
            z-index: 1000;
            overflow-y: auto;
        }

        .sidebar.closed {
            left: -240px;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #2a2d34;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }

        .sidebar-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .sidebar-close {
            background: none;
            border: none;
            color: #888;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            display: none;
        }

        .sidebar-close:hover {
            color: #fff;
        }

        /* Sidebar Toggle Arrow */
        .sidebar-toggle-arrow {
            position: fixed;
            left: 240px;
            top: 80px;
            width: 30px;
            height: 60px;
            background: #1a1d24;
            border: 1px solid #2a2d34;
            border-left: none;
            border-radius: 0 8px 8px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 999;
            box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);
            margin-left: -1px;
        }

        .sidebar-toggle-arrow:hover {
            background: #252a32;
            border-color: #3c4043;
            width: 35px;
        }

        .sidebar-toggle-arrow::before {
            content: '‹';
            font-size: 2rem;
            color: #888;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .sidebar-toggle-arrow:hover::before {
            color: #ff4757;
        }

        .sidebar-toggle-arrow.closed {
            left: 0;
            margin-left: 0;
        }

        .sidebar-toggle-arrow.closed::before {
            content: '›';
        }

        .sidebar-section {
            padding: 20px 0;
            border-bottom: 1px solid #2a2d34;
        }

        .sidebar-section-title {
            padding: 0 20px 10px;
            font-size: 0.75rem;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .sidebar-menu {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar-menu-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #888;
            font-weight: 500;
            border-left: 3px solid transparent;
        }

        .sidebar-menu-item:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
        }

        .sidebar-menu-item.active {
            background: rgba(255, 71, 87, 0.1);
            color: #fff;
            border-left-color: #ff4757;
        }

        .sidebar-menu-icon {
            font-size: 1.3rem;
            width: 24px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Estilos específicos para os novos ícones */
        .crash-icon svg {
            transition: all 0.2s ease;
        }

        .crash-icon:hover svg {
            transform: scale(1.05);
        }

        .crash-icon:hover svg path {
            stroke: #ffd700;
        }

        .crash-icon:hover svg circle {
            fill: #ffd700;
        }

        .mines-icon svg {
            transition: all 0.2s ease;
        }

        .mines-icon:hover svg {
            transform: scale(1.05);
        }

        .mines-icon:hover svg rect {
            stroke: #ffd700;
        }

        .mines-icon:hover svg path[fill="#ffd700"] {
            fill: #ffed4e;
        }

        .mines-icon:hover svg circle[fill="#ff4757"] {
            fill: #ff6b7a;
        }

        /* Animação para o ícone ativo */
        .sidebar-menu-item.active .crash-icon svg {
            animation: crashPulse 2s infinite;
        }

        .sidebar-menu-item.active .mines-icon svg {
            animation: minesShine 2s infinite;
        }

        @keyframes crashPulse {
            0%, 100% {
                filter: brightness(1);
            }
            50% {
                filter: brightness(1.05);
            }
        }

        @keyframes minesShine {
            0%, 100% {
                filter: brightness(1);
            }
            50% {
                filter: brightness(1.05);
            }
        }


        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            margin-left: 240px;
            transition: margin-left 0.2s ease;
            width: calc(100% - 240px);
            height: 100vh;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .main-content.sidebar-closed {
            margin-left: 0;
            width: 100%;
        }

        /* Scrollbar customizada para main-content */
        .main-content::-webkit-scrollbar {
            width: 8px;
        }

        .main-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
        }

        .main-content::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .main-content::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        /* Overlay for mobile */
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            display: none;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .sidebar-overlay.show {
            display: block;
            opacity: 1;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.05);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            animation: fadeInUp 0.8s ease-out;
            height: 70px;
            flex-wrap: nowrap;
            gap: 15px;
            flex-shrink: 0;
        }

        .game-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            position: relative;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
        }

        .logo-icon::before {
            content: '';
            position: absolute;
            top: -8px;
            left: -8px;
            right: -8px;
            bottom: -8px;
            background: linear-gradient(45deg, #ffd700, #ff6b35, #ff3333, #cc0000);
            border-radius: 50%;
            opacity: 0.1;
            animation: logoGlow 3s ease-in-out infinite alternate;
            z-index: -1;
        }

        .logo-icon::after {
            content: '';
            position: absolute;
            top: -12px;
            left: -12px;
            right: -12px;
            bottom: -12px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.2) 0%, transparent 70%);
            border-radius: 50%;
            animation: logoGlow 4s ease-in-out infinite alternate-reverse;
            z-index: -2;
        }

        .logo-icon .sparkle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: #ffd700;
            border-radius: 50%;
            animation: sparkleFloat 2s ease-in-out infinite;
        }

        .logo-icon .sparkle:nth-child(1) {
            top: -15px;
            left: 10px;
            animation-delay: 0s;
        }

        .logo-icon .sparkle:nth-child(2) {
            top: 5px;
            right: -15px;
            animation-delay: 0.5s;
        }

        .logo-icon .sparkle:nth-child(3) {
            bottom: -10px;
            left: 5px;
            animation-delay: 1s;
        }

        .logo-icon .sparkle:nth-child(4) {
            top: 8px;
            left: -15px;
            animation-delay: 1.5s;
        }

        .flame {
            position: relative;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ffd700, #ff6b35, #ff3333, #cc0000);
            border-radius: 20% 80% 20% 80% / 60% 40% 60% 40%;
            transform: rotate(45deg);
            animation: energyPulse 2.5s ease-in-out infinite alternate;
            box-shadow: 
                0 0 20px rgba(255, 215, 0, 0.8),
                0 0 30px rgba(255, 107, 53, 0.6),
                0 0 40px rgba(255, 51, 51, 0.4),
                0 0 50px rgba(204, 0, 0, 0.2);
        }

        .flame::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: linear-gradient(135deg, #ffd700, #ff6b35, #ff3333, #cc0000);
            border-radius: 20% 80% 20% 80% / 60% 40% 60% 40%;
            opacity: 0.3;
            animation: flameFlicker 1.5s ease-in-out infinite alternate;
            z-index: -1;
        }

        .flame::after {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: linear-gradient(135deg, #ffd700, #ff6b35, #ff3333, #cc0000);
            border-radius: 20% 80% 20% 80% / 60% 40% 60% 40%;
            opacity: 0.2;
            animation: flameFlicker 2s ease-in-out infinite alternate-reverse;
            z-index: -2;
        }

        .dice {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(15deg);
            width: 16px;
            height: 16px;
            background: #ff3333;
            border: 2px solid #fff;
            border-radius: 3px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 2px;
            padding: 2px;
            box-shadow: 0 0 8px rgba(255, 51, 51, 0.6);
        }

        .pip {
            background: #fff;
            border-radius: 50%;
            width: 100%;
            height: 100%;
        }

        @keyframes energyPulse {
            0% {
                transform: rotate(45deg) scale(1);
                box-shadow: 
                    0 0 20px rgba(255, 215, 0, 0.8),
                    0 0 30px rgba(255, 107, 53, 0.6),
                    0 0 40px rgba(255, 51, 51, 0.4),
                    0 0 50px rgba(204, 0, 0, 0.2);
            }
            100% {
                transform: rotate(45deg) scale(1.1);
                box-shadow: 
                    0 0 25px rgba(255, 215, 0, 1.0),
                    0 0 35px rgba(255, 107, 53, 0.8),
                    0 0 45px rgba(255, 51, 51, 0.6),
                    0 0 55px rgba(204, 0, 0, 0.4);
            }
        }

        @keyframes flameFlicker {
            0% {
                transform: rotate(45deg) scale(1) rotateX(0deg);
                opacity: 0.3;
            }
            50% {
                transform: rotate(45deg) scale(1.05) rotateX(5deg);
                opacity: 0.5;
            }
            100% {
                transform: rotate(45deg) scale(1.1) rotateX(0deg);
                opacity: 0.2;
            }
        }

        @keyframes logoGlow {
            0% {
                opacity: 0.1;
                transform: scale(1);
            }
            50% {
                opacity: 0.3;
                transform: scale(1.05);
            }
            100% {
                opacity: 0.2;
                transform: scale(1.1);
            }
        }

        @keyframes titleGlow {
            0% {
                text-shadow: 
                    0 2px 8px rgba(0, 0, 0, 0.4), 
                    0 0 20px rgba(255, 255, 255, 0.1),
                    0 0 30px rgba(255, 215, 0, 0.3);
            }
            100% {
                text-shadow: 
                    0 2px 8px rgba(0, 0, 0, 0.4), 
                    0 0 25px rgba(255, 255, 255, 0.2),
                    0 0 40px rgba(255, 215, 0, 0.5);
            }
        }

        @keyframes titleShimmer {
            0% {
                opacity: 0.3;
                transform: translateX(-2px);
            }
            50% {
                opacity: 0.6;
                transform: translateX(0px);
            }
            100% {
                opacity: 0.3;
                transform: translateX(2px);
            }
        }

        @keyframes sparkleFloat {
            0% {
                opacity: 0;
                transform: scale(0) translateY(0px);
            }
            50% {
                opacity: 1;
                transform: scale(1) translateY(-10px);
            }
            100% {
                opacity: 0;
                transform: scale(0) translateY(-20px);
            }
        }

        .game-title h1 {
            font-size: 2.2rem;
            font-weight: 700;
            color: #fff;
            letter-spacing: 0.05em;
            margin: 0;
            text-transform: none;
            position: relative;
            font-family: 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            text-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.4), 
                0 0 20px rgba(255, 255, 255, 0.1),
                0 0 30px rgba(255, 215, 0, 0.3);
            font-style: normal;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            animation: titleGlow 2s ease-in-out infinite alternate;
        }

        .game-title h1::before {
            content: 'BETetevm';
            position: absolute;
            top: 0;
            left: 0;
            background: linear-gradient(45deg, #ffd700, #ff6b35, #ff3333);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            opacity: 0.3;
            animation: titleShimmer 3s ease-in-out infinite;
            z-index: -1;
        }


        .history-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            align-items: center;
            margin-top: 20px;
            margin-bottom: 40px;
            padding: 20px;
            animation: fadeInUp 1s ease-out 1s both;
        }

        .history-title {
            color: #888;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .history-counters {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .counter-item {
            padding: 8px 12px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
            text-align: center;
            border: 2px solid;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            min-width: 60px;
            animation: slideInFromLeft 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .counter-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.6s;
        }

        .counter-item:hover::before {
            left: 100%;
        }

        .counter-item:hover {
            transform: scale(1.1) translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .blueBorder {
            background: rgba(255, 193, 7, 0.2);
            border-color: #ffc107;
            color: #ffc107;
        }

        .purpleBorder {
            background: rgba(255, 165, 0, 0.2);
            border-color: #ffa500;
            color: #ffa500;
        }

        .burgundyBorder {
            background: rgba(255, 71, 87, 0.2);
            border-color: #ff4757;
            color: #ff4757;
        }

        .balance-display {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-shrink: 0;
            min-width: 0;
        }

        .balance-label {
            color: #888;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .balance-amount {
            background: #1e2328;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 1.2rem;
            font-weight: 600;
            color: #fff;
            border: 1px solid #3c4043;
            white-space: nowrap;
            overflow: visible;
            min-width: 0;
        }

        .game-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 20px;
            overflow: hidden;
        }

        .canvas-container {
            width: 95%;
            max-width: 900px;
            height: 450px;
            background: #1e2328;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 1px solid #3c4043;
            margin-bottom: 30px;
            animation: fadeInUp 1s ease-out 0.2s both;
            transition: all 0.2s ease;
        }



        #canvas {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            background: #1e2328;
            will-change: transform;
        }

        .multiplier-display {
            position: absolute;
            top: 30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4rem;
            font-weight: 800;
            color: #fff;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.8);
            z-index: 10;
            animation: pulse 2s infinite;
            letter-spacing: -0.02em;
            will-change: color, text-shadow;
        }

        .crash-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, #ff4757, #e74c3c);
            padding: 25px 50px;
            border-radius: 8px;
            text-align: center;
            z-index: 20;
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.4);
            display: none;
        }

        .crash-multiplier {
            font-size: 42px;
            font-weight: bold;
            color: white;
            margin-bottom: 8px;
            line-height: 1;
        }

        .crash-text {
            font-size: 16px;
            font-weight: bold;
            color: white;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.95;
        }

        .countdown-bar {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 600px;
            height: 60px;
            background: #21252C;
            border-radius: 8px;
            z-index: 25;
            display: none;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .countdown-bar.show {
            animation: fadeInCountdown 0.3s ease-out forwards;
        }

        .countdown-bar.hide {
            animation: fadeOutCountdown 0.4s ease-out forwards;
        }

        @keyframes fadeInCountdown {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        @keyframes fadeOutCountdown {
            from {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            to {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.95);
            }
        }

        .countdown-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: #F03E57;
            border-radius: 8px;
            transition: width 0.1s linear;
            box-shadow: 0 0 10px rgba(240, 62, 87, 0.5);
        }

        .countdown-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
            z-index: 2;
            white-space: nowrap;
        }

        .countdown-text {
            color: white;
            font-size: 20px;
            font-weight: bold;
            margin: 0;
            display: inline;
        }

        .countdown-timer {
            color: white;
            font-size: 20px;
            font-weight: bold;
            display: inline;
            margin-left: 8px;
        }


        @keyframes pulse {
            0%, 100% { 
                transform: translateX(-50%) scale(1);
                filter: brightness(1);
            }
            50% { 
                transform: translateX(-50%) scale(1.1);
                filter: brightness(1.2);
            }
        }

        @keyframes explosion {
            0% { 
                transform: translateX(-50%) scale(1);
                opacity: 1;
            }
            25% { 
                transform: translateX(-50%) scale(1.5);
                opacity: 0.8;
            }
            50% { 
                transform: translateX(-50%) scale(2);
                opacity: 0.6;
            }
            75% { 
                transform: translateX(-50%) scale(2.5);
                opacity: 0.3;
            }
            100% { 
                transform: translateX(-50%) scale(3);
                opacity: 0;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes glow {
            0%, 100% {
                box-shadow: 0 0 5px rgba(255, 71, 87, 0.3);
            }
            50% {
                box-shadow: 0 0 20px rgba(255, 71, 87, 0.6), 0 0 30px rgba(255, 71, 87, 0.4);
            }
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }
            100% {
                background-position: 200% 0;
            }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }

        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutToRight {
            from {
                opacity: 1;
                transform: translateX(0);
            }
            to {
                opacity: 0;
                transform: translateX(50px);
            }
        }

        .explosion-effect {
            animation: explosion 1s ease-out;
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        .slide-in-right {
            animation: slideInRight 0.3s ease-out;
        }

        .slide-in-left {
            animation: slideInLeft 0.3s ease-out;
        }

        .glow-effect {
            animation: glow 2s ease-in-out infinite;
        }

        .float-effect {
            animation: float 3s ease-in-out infinite;
        }

        .shimmer-effect {
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        .bounce-effect {
            animation: bounce 1s ease-in-out;
        }

        .slide-in-from-left {
            animation: slideInFromLeft 0.4s ease-out;
        }

        .slide-out-to-right {
            animation: slideOutToRight 0.2s ease-in;
        }

        .controls-container {
            display: flex;
            gap: 20px;
            align-items: center;
            width: 90%;
            max-width: 600px;
            animation: fadeInUp 1s ease-out 0.8s both;
        }

        .bet-input-container {
            flex: 1;
            position: relative;
        }

        .bet-input {
            width: 100%;
            padding: 20px 60px 20px 60px;
            font-size: 1.5rem;
            font-weight: 600;
            color: #fff;
            background: #1e2328;
            border: 1px solid #5a5d65;
            border-radius: 8px;
            text-align: center;
            outline: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            cursor: pointer;
            appearance: textfield;
            -moz-appearance: textfield;
        }

        .bet-input::-webkit-outer-spin-button,
        .bet-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .bet-input:focus {
            border-color: #ff4757;
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.3);
            transform: scale(1.02);
            background: #252a32;
        }

        .bet-input:hover {
            border-color: #5a5d65;
            background: #252a32;
        }

        .bet-input::placeholder {
            color: #666;
            font-weight: 400;
        }

        .currency-symbol {
            position: absolute;
            left: 30px;
            top: 50%;
            transform: translateY(-50%);
            color: #ffc107;
            font-size: 1.3rem;
            font-weight: 700;
            pointer-events: none;
            z-index: 2;
        }

        .bet-input-controls {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 4px;
            z-index: 2;
        }

        .bet-input-btn {
            width: 24px;
            height: 24px;
            background: #3c4043;
            border: 1px solid #5a5d65;
            border-radius: 4px;
            color: #fff;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            user-select: none;
        }

        .bet-input-btn:hover {
            background: #5a5d65;
            transform: scale(1.1);
        }

        .bet-input-btn:active {
            transform: scale(0.95);
            background: #ff4757;
        }

        /* Melhorias para touch em dispositivos móveis */
        @media (max-width: 414px) {
            .bet-input-btn {
                min-width: 24px;
                min-height: 24px;
                touch-action: manipulation;
                transition: all 0.2s ease;
            }
            
            .bet-input-btn:active {
                transform: scale(0.9);
                background: #ff4757;
            }
            
            .quick-bet {
                min-width: 44px;
                min-height: 44px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
                transition: all 0.2s ease;
            }
            
            .quick-bet:active {
                transform: scale(0.95);
                background: linear-gradient(135deg, rgba(255, 71, 87, 0.3), rgba(255, 71, 87, 0.4));
            }
            
            .bet-button {
                min-height: 48px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
                transition: all 0.2s ease;
            }
            
            .bet-button:active {
                transform: scale(0.98);
            }
            
            .counter-item {
                min-height: 36px;
                touch-action: manipulation;
                -webkit-tap-highlight-color: transparent;
                transition: all 0.2s ease;
            }
            
            .counter-item:active {
                transform: scale(0.95);
            }
            
            .stat-item {
                min-height: 40px;
                touch-action: manipulation;
            }
            
            /* Melhorar scroll suave */
            .history-counters {
                scroll-behavior: smooth;
                -webkit-overflow-scrolling: touch;
            }
            
            /* Otimizar para telas pequenas */
            .game-container {
                min-height: calc(100vh - 60px);
                min-height: calc(100dvh - 60px);
            }
            
            /* Melhorar legibilidade */
            .multiplier-display {
                font-weight: 900;
                letter-spacing: -0.5px;
            }
            
            /* Ajustar espaçamentos para telas muito pequenas */
            @media (max-width: 375px) {
                .canvas-container {
                    height: 160px;
                }
                
                .multiplier-display {
                    font-size: 1.6rem;
                }
                
                .bet-input {
                    font-size: 0.9rem;
                    padding: 10px 35px 10px 35px;
                }
                
                .currency-symbol {
                    left: 12px;
                    font-size: 0.8rem;
                }
                
                .bet-input-controls {
                    right: 5px;
                    gap: 3px;
                }
                
                .bet-input-btn {
                    width: 22px;
                    height: 22px;
                    font-size: 11px;
                    min-width: 22px;
                    min-height: 22px;
                }
                
                .bet-button {
                    font-size: 1rem;
                    padding: 10px;
                }
                
                .header {
                    padding: 6px 8px;
                    min-height: 45px;
                }
                
                .balance-amount {
                    font-size: 0.9rem;
                    padding: 5px 10px;
                    min-width: 70px;
                }
                
                .balance-label {
                    font-size: 0.75rem;
                }
                
                .logo-icon {
                    width: 28px;
                    height: 28px;
                    filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.2));
                }
                
                .logo-icon .sparkle {
                    width: 1.5px;
                    height: 1.5px;
                }
                
                .logo-icon .sparkle:nth-child(1) {
                    top: -10px;
                    left: 7px;
                }
                
                .logo-icon .sparkle:nth-child(2) {
                    top: 3px;
                    right: -10px;
                }
                
                .logo-icon .sparkle:nth-child(3) {
                    bottom: -7px;
                    left: 3px;
                }
                
                .logo-icon .sparkle:nth-child(4) {
                    top: 5px;
                    left: -10px;
                }
                
                .dice {
                    width: 10px;
                    height: 10px;
                }
                
                .game-title h1 {
                    font-size: 1.3rem;
                    font-weight: 700;
                    letter-spacing: 0.02em;
                    text-transform: none;
                    text-shadow: 
                        0 1px 3px rgba(0, 0, 0, 0.3), 
                        0 0 12px rgba(255, 255, 255, 0.1),
                        0 0 20px rgba(255, 215, 0, 0.2);
                }
            }
            
            /* Ajustar para telas maiores (tablets pequenos) */
            @media (min-width: 415px) and (max-width: 768px) {
                .bet-input {
                    font-size: 1.3rem;
                    padding: 18px 55px 18px 55px;
                }
                
                .currency-symbol {
                    left: 25px;
                    font-size: 1.1rem;
                }
                
                .bet-input-controls {
                    right: 10px;
                    gap: 8px;
                }
                
                .bet-input-btn {
                    width: 30px;
                    height: 30px;
                    font-size: 15px;
                    min-width: 30px;
                    min-height: 30px;
                }
            }
            
            /* Garantir que o saldo seja sempre visível */
            @media (max-width: 414px) {
                .header {
                    position: relative;
                    z-index: 100;
                    background: rgba(40, 44, 52, 0.95);
                    backdrop-filter: blur(10px);
                }
                
                .balance-display {
                    flex-shrink: 0;
                }
                
                .balance-amount {
                    white-space: nowrap;
                    overflow: visible;
                }
            }
            
            /* Garantir responsividade máxima do campo de entrada */
            .bet-input-container {
                position: relative;
                width: 100%;
                max-width: 100%;
                overflow: hidden;
            }
            
            .bet-input {
                min-width: 0;
                max-width: 100%;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            
            /* Prevenir quebra de layout em telas muito estreitas */
            @media (max-width: 320px) {
                .bet-input {
                    font-size: 0.8rem;
                    padding: 8px 30px 8px 30px;
                }
                
                .currency-symbol {
                    left: 10px;
                    font-size: 0.7rem;
                }
                
                .bet-input-controls {
                    right: 4px;
                    gap: 2px;
                }
                
                .bet-input-btn {
                    width: 20px;
                    height: 20px;
                    font-size: 10px;
                    min-width: 20px;
                    min-height: 20px;
                }
            }
        }

        .bet-input-label {
            position: absolute;
            top: -30px;
            left: 0;
            color: #888;
            font-size: 0.8rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 10;
            background: rgba(40, 44, 52, 0.9);
            padding: 2px 8px;
            border-radius: 4px;
        }

        .bet-button {
            padding: 20px 60px;
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            background: linear-gradient(135deg, #ff4757, #ff3742);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 10px 30px rgba(255, 71, 87, 0.4);
            position: relative;
            overflow: hidden;
        }

        .bet-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .bet-button:hover::before {
            left: 100%;
        }

        .bet-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 71, 87, 0.6);
        }

        .bet-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .bet-button.cash-out {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            box-shadow: 0 10px 30px rgba(46, 204, 113, 0.4);
        }

        .bet-button.cash-out:hover {
            box-shadow: 0 15px 40px rgba(46, 204, 113, 0.6);
        }


        .quick-bets {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 5;
            animation: slideInRight 0.8s ease-out 0.6s both;
        }

        .quick-bet {
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.12));
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.02em;
            min-width: 80px;
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .quick-bet:hover {
            background: linear-gradient(135deg, rgba(255, 71, 87, 0.2), rgba(255, 71, 87, 0.3));
            border-color: rgba(255, 71, 87, 0.4);
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 71, 87, 0.2);
        }

        .quick-bet:active {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.3);
        }

        .stats-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            gap: 20px;
            z-index: 5;
            animation: slideInLeft 0.8s ease-out 0.4s both;
            transition: left 0.2s ease;
        }

        /* Ajustar stats-overlay no desktop para não sobrepor a seta */
        @media (min-width: 769px) {
            .stats-overlay {
                left: 40px;
            }

            .main-content.sidebar-closed .stats-overlay {
                left: 40px;
            }
        }

        .stat-item {
            text-align: center;
            padding: 10px 15px;
            background: rgba(30, 35, 40, 0.8);
            border-radius: 15px;
            border: 1px solid rgba(60, 64, 67, 0.3);
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: bold;
            color: #fff;
        }

        .stat-label {
            font-size: 0.7rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }


        .warning-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease-out;
        }

        .warning-modal.hidden {
            display: none;
        }

        .warning-content {
            background: linear-gradient(135deg, rgba(30, 35, 40, 0.98), rgba(37, 42, 50, 0.98));
            backdrop-filter: blur(10px);
            padding: 60px 80px;
            border-radius: 20px;
            text-align: center;
            border: 2px solid #ff4757;
            box-shadow: 0 20px 60px rgba(255, 71, 87, 0.3);
            max-width: 600px;
            margin: 20px;
            animation: slideInUp 0.6s ease-out;
        }

        .warning-icon {
            font-size: 6rem;
            margin: 0 auto 40px auto;
            color: #ffc107;
            text-shadow: 0 0 30px rgba(255, 193, 7, 0.8);
            filter: drop-shadow(0 0 20px rgba(255, 193, 7, 0.6));
            display: block;
            width: fit-content;
            animation: smoothGlow 4s ease-in-out infinite;
        }

        .warning-title {
            color: #ffc107;
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255, 193, 7, 0.5);
        }

        .warning-subtitle {
            color: #ff4757;
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 40px;
            text-shadow: 0 0 15px rgba(255, 71, 87, 0.3);
        }

        .warning-description {
            color: #ccc;
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 50px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .confirm-button {
            background: linear-gradient(135deg, #ff4757, #e74c3c);
            color: white;
            border: none;
            padding: 20px 60px;
            font-size: 1.5rem;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 10px 30px rgba(255, 71, 87, 0.4);
            position: relative;
            overflow: hidden;
        }

        .confirm-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .confirm-button:hover::before {
            left: 100%;
        }

        .confirm-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 71, 87, 0.6);
        }

        .confirm-button:active {
            transform: translateY(-1px);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes smoothGlow {
            0%, 100% {
                text-shadow: 0 0 30px rgba(255, 193, 7, 0.8);
                filter: drop-shadow(0 0 20px rgba(255, 193, 7, 0.6));
            }
            50% {
                text-shadow: 0 0 50px rgba(255, 193, 7, 0.9);
                filter: drop-shadow(0 0 30px rgba(255, 193, 7, 0.8));
            }
        }


        /* Credits Modal - Estilo Bet */
        .credits-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10001;
            animation: fadeIn 0.2s ease-out;
        }

        .credits-modal.show {
            display: flex;
        }

        .credits-content {
            background: #1e2328;
            padding: 30px 40px;
            border-radius: 8px;
            text-align: left;
            border: 1px solid #3c4043;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            max-width: 450px;
            width: 90%;
            margin: 20px;
            animation: slideInUp 0.2s ease-out;
            position: relative;
        }

        .credits-close {
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #3c4043;
            color: #888;
            font-size: 1.2rem;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s ease;
            font-weight: 300;
        }

        .credits-close:hover {
            background: rgba(255, 71, 87, 0.1);
            border-color: #ff4757;
            color: #ff4757;
        }

        .credits-title {
            color: #fff;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .credits-subtitle {
            color: #666;
            font-size: 0.8rem;
            margin-bottom: 25px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 500;
        }

        .credits-team {
            margin: 15px 0;
        }

        .credits-label {
            color: #888;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .credits-member {
            color: #fff;
            font-size: 1rem;
            font-weight: 500;
            padding: 10px 15px;
            margin: 6px 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            border-left: 2px solid #ffc107;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .credits-member::before {
            content: '•';
            color: #ffc107;
            font-size: 1.2rem;
        }

        .credits-member:hover {
            background: rgba(255, 193, 7, 0.08);
            border-left-color: #ff6b35;
        }

        .credits-school {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid #3c4043;
        }

        .credits-school-name {
            color: #fff;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .credits-class {
            color: #888;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .credits-school-name::before {
            content: '';
            margin-right: 8px;
        }

        /* Mines Game Styles */
        #mines-game {
            padding: 10px 20px;
            justify-content: center;
            gap: 15px;
        }

        .mines-header {
            width: 100%;
            margin-bottom: 10px;
            animation: fadeInUp 0.6s ease-out;
        }

        .mines-info {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .mines-info-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px 20px;
            background: rgba(30, 35, 40, 0.8);
            border-radius: 15px;
            border: 1px solid rgba(60, 64, 67, 0.3);
            animation: fadeInUp 0.6s ease-out;
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .mines-info-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 71, 87, 0.4);
        }

        .mines-info-item:nth-child(1) {
            animation-delay: 0.1s;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        .mines-info-item:nth-child(2) {
            animation-delay: 0.2s;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        .mines-info-item:nth-child(3) {
            animation-delay: 0.3s;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        .mines-info-label {
            color: #888;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .mines-info-value {
            color: #fff;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .multiplier-value {
            color: #fff;
            transition: all 0.2s ease;
        }

        .profit-value {
            color: #fff;
            transition: all 0.2s ease;
        }

        /* Classes dinâmicas para multiplicador */
        .multiplier-value.white { color: #fff; text-shadow: none; }
        .multiplier-value.yellow { color: #ffc107; text-shadow: 0 0 10px rgba(255, 193, 7, 0.5); }
        .multiplier-value.orange { color: #ffa500; text-shadow: 0 0 10px rgba(255, 165, 0, 0.5); }
        .multiplier-value.red { color: #ff4757; text-shadow: 0 0 10px rgba(255, 71, 87, 0.5); }

        /* Classes dinâmicas para lucro */
        .profit-value.white { color: #fff; text-shadow: none; }
        .profit-value.green { color: #2ecc71; text-shadow: 0 0 10px rgba(46, 204, 113, 0.5); }

        .mines-grid-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px 0;
            overflow: visible;
            padding: 5px;
            animation: fadeInUp 0.8s ease-out 0.4s both;
        }

        .mines-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            padding: 15px;
            background: rgba(30, 35, 40, 0.8);
            border-radius: 15px;
            border: 1px solid rgba(60, 64, 67, 0.3);
            min-width: min-content;
            backdrop-filter: blur(10px);
        }


        .mine-tile {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.12));
            border: 1px solid rgba(60, 64, 67, 0.3);
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
            -webkit-user-select: none;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        /* Animação cascata para os tiles - apenas quando tem a classe 'animate' */
        .mine-tile.animate {
            animation: scaleIn 0.2s ease-out both;
        }

        .mine-tile.animate:nth-child(1) { animation-delay: 0.45s; }
        .mine-tile.animate:nth-child(2) { animation-delay: 0.48s; }
        .mine-tile.animate:nth-child(3) { animation-delay: 0.51s; }
        .mine-tile.animate:nth-child(4) { animation-delay: 0.54s; }
        .mine-tile.animate:nth-child(5) { animation-delay: 0.57s; }
        .mine-tile.animate:nth-child(6) { animation-delay: 0.50s; }
        .mine-tile.animate:nth-child(7) { animation-delay: 0.53s; }
        .mine-tile.animate:nth-child(8) { animation-delay: 0.56s; }
        .mine-tile.animate:nth-child(9) { animation-delay: 0.59s; }
        .mine-tile.animate:nth-child(10) { animation-delay: 0.62s; }
        .mine-tile.animate:nth-child(11) { animation-delay: 0.55s; }
        .mine-tile.animate:nth-child(12) { animation-delay: 0.58s; }
        .mine-tile.animate:nth-child(13) { animation-delay: 0.61s; }
        .mine-tile.animate:nth-child(14) { animation-delay: 0.64s; }
        .mine-tile.animate:nth-child(15) { animation-delay: 0.67s; }
        .mine-tile.animate:nth-child(16) { animation-delay: 0.60s; }
        .mine-tile.animate:nth-child(17) { animation-delay: 0.63s; }
        .mine-tile.animate:nth-child(18) { animation-delay: 0.66s; }
        .mine-tile.animate:nth-child(19) { animation-delay: 0.69s; }
        .mine-tile.animate:nth-child(20) { animation-delay: 0.72s; }
        .mine-tile.animate:nth-child(21) { animation-delay: 0.65s; }
        .mine-tile.animate:nth-child(22) { animation-delay: 0.68s; }
        .mine-tile.animate:nth-child(23) { animation-delay: 0.71s; }
        .mine-tile.animate:nth-child(24) { animation-delay: 0.74s; }
        .mine-tile.animate:nth-child(25) { animation-delay: 0.77s; }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .mine-tile::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .mine-tile:hover:not(.revealed):not(.disabled) {
            background: linear-gradient(135deg, rgba(255, 71, 87, 0.2), rgba(255, 71, 87, 0.3));
            border-color: #ff4757;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 71, 87, 0.3);
        }

        .mine-tile:active:not(.revealed):not(.disabled) {
            transform: scale(0.95);
            background: linear-gradient(135deg, rgba(255, 71, 87, 0.3), rgba(255, 71, 87, 0.4));
        }

        .mine-tile:hover::before {
            left: 100%;
        }

        .mine-tile.revealed {
            cursor: default;
        }

        .mine-tile.diamond {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.3), rgba(255, 165, 0, 0.3));
            border-color: #ffc107;
            box-shadow: 0 0 15px rgba(255, 193, 7, 0.4);
        }

        .mine-tile.bomb {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.3), rgba(255, 237, 78, 0.3));
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
        }

        .mine-tile.bomb svg {
            animation: bombPulse 0.3s ease-out;
        }

        .mine-tile.diamond {
            background: linear-gradient(135deg, rgba(255, 71, 87, 0.3), rgba(255, 107, 122, 0.3));
            border-color: #ff4757;
            box-shadow: 0 0 15px rgba(255, 71, 87, 0.4);
        }

        .mine-tile.diamond svg {
            animation: diamondSparkle 0.6s ease-out;
        }

        @keyframes bombPulse {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            50% {
                transform: scale(1.1);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes diamondSparkle {
            0% {
                transform: scale(0.5) rotate(-10deg);
                opacity: 0;
            }
            50% {
                transform: scale(1.1) rotate(5deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 1;
            }
        }

        /* Animação de revelação das minas */
        .mine-tile.reveal-animate {
            animation: revealFade 0.4s ease-out both;
        }

        @keyframes revealFade {
            from {
                opacity: 0;
                transform: scale(0.8) rotateY(90deg);
            }
            to {
                opacity: 1;
                transform: scale(1) rotateY(0deg);
            }
        }

        /* Animação de esconder as minas (reverso) */
        .mine-tile.hide-animate {
            animation: hideFade 0.4s ease-out both;
        }

        @keyframes hideFade {
            from {
                opacity: 1;
                transform: scale(1) rotateY(0deg);
            }
            to {
                opacity: 0;
                transform: scale(0.8) rotateY(-90deg);
            }
        }

        .mine-tile.disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .mines-controls {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 15px;
            background: rgba(30, 35, 40, 0.8);
            border-radius: 15px;
            border: 1px solid rgba(60, 64, 67, 0.3);
            animation: fadeInUp 1s ease-out 0.6s both;
            backdrop-filter: blur(10px);
        }

        .mines-settings {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 12px;
        }

        .setting-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .setting-label {
            color: #888;
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .mines-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .mines-option {
            flex: 1;
            min-width: 60px;
            padding: 12px 20px;
            background: #1e2328;
            border: 1px solid #5a5d65;
            border-radius: 8px;
            color: #888;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
            position: relative;
            overflow: hidden;
        }

        .mines-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .mines-option:hover::before {
            left: 100%;
        }

        .mines-option:hover {
            background: #252a32;
            border-color: #5a5d65;
            color: #fff;
            transform: translateY(-2px);
        }

        .mines-option:active {
            transform: scale(0.98);
        }

        .mines-option.active {
            background: linear-gradient(135deg, #ff4757, #ff3742);
            border-color: #ff4757;
            color: #fff;
            box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4);
        }

        .mines-option.active:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 71, 87, 0.5);
        }

        .mines-option.active:active {
            transform: scale(0.98);
        }

        .mines-actions {
            display: flex;
            gap: 15px;
        }

        .mines-actions .bet-button {
            flex: 1;
        }

        .mines-bet-input {
            background: #1e2328;
            border: 1px solid #5a5d65;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .mines-bet-input:focus {
            border-color: #ff4757;
            box-shadow: 0 0 20px rgba(255, 71, 87, 0.3);
            transform: scale(1.02);
            background: #252a32;
        }

        .mines-bet-input:hover {
            border-color: #5a5d65;
            background: #252a32;
        }

        .mines-start-btn {
            background: linear-gradient(135deg, #ff4757, #ff3742);
            box-shadow: 0 10px 30px rgba(255, 71, 87, 0.4);
            position: relative;
            overflow: hidden;
        }

        .mines-start-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .mines-start-btn:hover::before {
            left: 100%;
        }

        .mines-start-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 71, 87, 0.6);
        }

        .mines-cashout-btn {
            background: linear-gradient(135deg, #ffc107, #ffa500);
            box-shadow: 0 10px 30px rgba(255, 193, 7, 0.4);
            position: relative;
            overflow: hidden;
        }

        .mines-cashout-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .mines-cashout-btn:hover::before {
            left: 100%;
        }

        .mines-cashout-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 193, 7, 0.6);
        }

        /* Credits Button - Estilo Bet */
        .credits-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #1e2328;
            border: 1px solid #3c4043;
            color: #888;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.75rem;
            font-weight: 500;
            transition: all 0.2s ease;
            z-index: 998;
            display: flex;
            align-items: center;
            gap: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Ajustar posição do botão de créditos no mobile */
        @media (max-width: 768px) {
            .credits-button {
                bottom: 80px;
                right: 12px;
                padding: 6px 12px;
                font-size: 0.7rem;
            }
        }

        .credits-button:hover {
            background: #252a32;
            border-color: #5a5d65;
            color: #fff;
        }

        .credits-button::before {
            content: '©';
            font-size: 0.9rem;
            font-weight: bold;
            color: #ffc107;
        }

        /* Desktop sidebar adjustments */
        @media (min-width: 769px) {
            .sidebar-overlay {
                display: none !important;
            }
        }

        /* Responsive Sidebar */
        @media (max-width: 768px) {
            .sidebar {
                width: 280px;
                box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
            }

            .sidebar.closed {
                left: -280px;
            }

            .sidebar-close {
                display: block;
            }

            .sidebar-toggle-arrow {
                left: 280px;
                height: 50px;
                width: 25px;
                margin-left: -1px;
            }

            .sidebar-toggle-arrow.closed {
                left: 0;
                margin-left: 0;
            }

            .main-content {
                margin-left: 0;
                width: 100%;
            }

            .main-content.sidebar-closed {
                margin-left: 0;
            }

            .header {
                padding: 15px 20px;
            }

            .game-title h1 {
                font-size: 1.3rem;
            }

            /* Otimizações aprimoradas para mobile */
            #mines-game {
                padding-bottom: 50px;
            }

            .mines-grid-container {
                margin: 20px 0;
                padding: 0 5px;
            }
            
            .mine-tile {
                width: 58px;
                height: 58px;
                font-size: 1.5rem;
                border-radius: 12px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
            }

            .mines-grid {
                gap: 8px;
                padding: 15px;
                max-width: 100%;
                border-radius: 12px;
            }

            .mines-info {
                gap: 10px;
                justify-content: space-around;
                flex-wrap: nowrap;
            }

            .mines-info-item {
                padding: 10px 15px;
                font-size: 0.75rem;
                min-width: 90px;
                flex: 1;
                border-radius: 10px;
            }

            .mines-info-label {
                font-size: 0.7rem;
                margin-bottom: 6px;
            }

            .mines-info-value {
                font-size: 1.1rem;
            }

            .mines-controls {
                padding: 15px;
                gap: 15px;
                margin-bottom: 30px;
            }

            .mines-settings {
                gap: 15px;
            }

            .mines-selector {
                gap: 8px;
                justify-content: space-between;
            }

            .mines-option {
                min-width: 50px;
                padding: 10px 15px;
                font-size: 0.9rem;
                border-radius: 8px;
            }

            .setting-label {
                font-size: 0.75rem;
                margin-bottom: 8px;
            }

            .mines-bet-input {
                padding: 14px 45px 14px 45px;
                font-size: 1.2rem;
                border-radius: 10px;
            }

            .mines-bet-controls {
                right: 8px;
                gap: 5px;
            }

            .mines-bet-btn {
                width: 24px;
                height: 24px;
                font-size: 13px;
            }

            .mines-actions {
                gap: 10px;
                margin-top: 10px;
            }

            .mines-start-btn, .mines-cashout-btn {
                padding: 16px 24px;
                font-size: 1.1rem;
                border-radius: 10px;
                font-weight: 700;
            }
        }

        @media (max-width: 480px) {
            /* Otimizações para telas pequenas */
            .mines-grid-container {
                margin: 15px 0;
                padding: 0 2px;
            }
            
            .mine-tile {
                width: 54px;
                height: 54px;
                font-size: 1.4rem;
                border-radius: 10px;
            }

            .mines-grid {
                gap: 6px;
                padding: 12px;
            }

            .mines-info {
                gap: 6px;
            }

            .mines-info-item {
                padding: 8px 10px;
                min-width: 80px;
            }

            .mines-info-label {
                font-size: 0.65rem;
            }

            .mines-info-value {
                font-size: 1rem;
            }

            .mines-option {
                min-width: 45px;
                padding: 8px 12px;
                font-size: 0.85rem;
            }

            .mines-bet-input {
                padding: 12px 40px 12px 40px;
                font-size: 1.1rem;
            }

            .mines-bet-controls {
                right: 6px;
                gap: 4px;
            }

            .mines-bet-btn {
                width: 22px;
                height: 22px;
                font-size: 12px;
            }

            .mines-controls {
                margin-bottom: 25px;
            }

            .mines-start-btn, .mines-cashout-btn {
                padding: 14px 20px;
                font-size: 1rem;
            }
        }

        /* Otimizações adicionais para telas muito pequenas (iPhone SE, etc) */
        @media (max-width: 375px) {
            .mines-grid-container {
                margin: 10px 0;
            }
            
            .mine-tile {
                width: 50px;
                height: 50px;
                font-size: 1.3rem;
                border-radius: 8px;
            }

            .mines-grid {
                gap: 5px;
                padding: 10px;
            }

            .mines-info-item {
                padding: 6px 8px;
                min-width: 70px;
                font-size: 0.7rem;
            }

            .mines-info-label {
                font-size: 0.6rem;
            }

            .mines-info-value {
                font-size: 0.95rem;
            }

            .mines-option {
                min-width: 40px;
                padding: 7px 10px;
                font-size: 0.8rem;
            }

            .mines-bet-input {
                padding: 10px 38px 10px 38px;
                font-size: 1rem;
            }

            .mines-controls {
                margin-bottom: 20px;
            }

            .mines-start-btn, .mines-cashout-btn {
                padding: 12px 18px;
                font-size: 0.95rem;
            }
        }

        @media (max-width: 768px) {
            .credits-button {
                bottom: 12px;
                right: 12px;
                padding: 6px 12px;
                font-size: 0.7rem;
            }

            .credits-content {
                padding: 25px 20px;
                max-width: 92%;
            }

            .credits-title {
                font-size: 1.3rem;
            }

            .credits-member {
                font-size: 0.9rem;
                padding: 8px 12px;
            }

            .credits-school-name {
                font-size: 1rem;
            }

            .credits-class {
                font-size: 0.85rem;
            }
        }

        /* Media query específica para telas de 6.5 polegadas (360-414px) */
        @media (max-width: 414px) and (min-width: 360px) {
            .header {
                padding: 8px 10px;
                gap: 6px;
                flex-wrap: nowrap;
                overflow: hidden;
            }
            
            .game-title {
                flex-shrink: 1;
                min-width: 0;
            }
            
            .game-title h1 {
                font-size: 1.2rem;
                flex-shrink: 1;
                min-width: 0;
            }
            
            .balance-display {
                flex-shrink: 0;
                min-width: 0;
            }
            
            .balance-amount {
                font-size: 0.9rem;
                padding: 4px 8px;
                min-width: 70px;
                white-space: nowrap;
                overflow: visible;
            }
            .bet-input {
                font-size: 1.2rem;
                padding: 15px 50px 15px 50px;
                height: 50px;
            }
            
            .currency-symbol {
                left: 20px;
                font-size: 1.1rem;
            }
            
            .bet-input-controls {
                right: 4px;
                gap: 8px;
            }
            
            .bet-input-btn {
                width: 32px;
                height: 32px;
                font-size: 16px;
            }
            body {
                font-size: 13px;
                overflow-x: hidden;
                height: 100vh;
                height: 100dvh; /* Dynamic viewport height para mobile */
            }
            
            .header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                padding: 8px 12px;
                gap: 8px;
                min-height: 50px;
                width: 100%;
                display: flex;
                flex-wrap: nowrap;
                overflow: hidden;
            }
            
            .logo-icon {
                width: 32px;
                height: 32px;
                filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2));
            }
            
            .logo-icon .sparkle {
                width: 2px;
                height: 2px;
            }
            
            .logo-icon .sparkle:nth-child(1) {
                top: -12px;
                left: 8px;
            }
            
            .logo-icon .sparkle:nth-child(2) {
                top: 4px;
                right: -12px;
            }
            
            .logo-icon .sparkle:nth-child(3) {
                bottom: -8px;
                left: 4px;
            }
            
            .logo-icon .sparkle:nth-child(4) {
                top: 6px;
                left: -12px;
            }
            
            .dice {
                width: 12px;
                height: 12px;
            }
            
            .game-title h1 {
                font-size: 1.4rem;
                font-weight: 700;
                letter-spacing: 0.03em;
                text-transform: none;
                text-shadow: 
                    0 1px 4px rgba(0, 0, 0, 0.3), 
                    0 0 15px rgba(255, 255, 255, 0.1),
                    0 0 25px rgba(255, 215, 0, 0.2);
                flex-shrink: 1;
                min-width: 0;
            }
            
            .balance-display {
                flex-direction: row;
                align-items: center;
                gap: 6px;
                display: flex;
                width: auto;
                justify-content: flex-end;
                flex-shrink: 0;
                min-width: 0;
            }
            
            .balance-label {
                font-size: 0.8rem;
                color: #888;
                font-weight: 500;
            }
            
            .balance-amount {
                font-size: 1rem;
                padding: 6px 12px;
                border-radius: 20px;
                background: #1e2328;
                color: #fff;
                font-weight: 600;
                border: 1px solid #3c4043;
                min-width: 80px;
                text-align: center;
                white-space: nowrap;
                overflow: visible;
            }
            
            .game-container {
                padding: 8px;
                gap: 12px;
                flex: 1;
                min-height: 0;
            }
            
            .stats-overlay {
                position: relative;
                top: auto;
                left: auto;
                justify-content: center;
                margin-bottom: 12px;
                flex-wrap: wrap;
                gap: 6px;
                order: 1;
            }
            
            .stat-item {
                padding: 6px 10px;
                min-width: 55px;
                flex: 1;
                max-width: 70px;
                border-radius: 12px;
            }
            
            .stat-value {
                font-size: 0.9rem;
            }
            
            .stat-label {
                font-size: 0.55rem;
            }

            .quick-bets {
                position: relative;
                top: auto;
                right: auto;
                justify-content: center;
                margin-bottom: 12px;
                order: 2;
                flex-wrap: wrap;
                gap: 6px;
            }
            
            .quick-bet {
                padding: 8px 12px;
                font-size: 0.75rem;
                min-width: 55px;
                flex: 1;
                max-width: 70px;
                border-radius: 6px;
            }
            
            .canvas-container {
                height: 180px;
                margin-bottom: 12px;
                order: 3;
                border-radius: 6px;
                position: relative;
                overflow: hidden;
                background: #1e2328;
                border: 1px solid #3c4043;
            }
            
            .multiplier-display {
                font-size: 1.8rem;
                top: 12px;
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
                z-index: 10;
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
            }
            
            #canvas {
                width: 100% !important;
                height: 100% !important;
                border-radius: 6px;
                background: #1e2328;
            }
            
            .history-section {
                margin: 12px 0;
                padding: 8px;
                order: 4;
            }
            
            .history-title {
                font-size: 0.75rem;
                margin-bottom: 6px;
            }
            
            .history-counters {
                gap: 4px;
                flex-wrap: nowrap;
                overflow-x: auto;
                padding: 4px 0;
                justify-content: flex-start;
                -webkit-overflow-scrolling: touch;
            }
            
            .counter-item {
                padding: 5px 8px;
                font-size: 0.75rem;
                min-width: 45px;
                flex-shrink: 0;
                border-radius: 3px;
            }
            
            .controls-container {
                flex-direction: column;
                width: 100%;
                gap: 12px;
                order: 5;
            }
            
            .bet-input-container {
                width: 100%;
            }
            
            .bet-input {
                font-size: clamp(1rem, 4vw, 1.2rem);
                padding: 15px 50px 15px 50px;
                border-radius: 8px;
                appearance: none;
                -webkit-appearance: none;
                -moz-appearance: textfield;
                touch-action: manipulation;
                background: #1e2328;
                border: 1px solid #5a5d65;
                color: #fff;
                font-weight: 600;
                text-align: center;
                width: 100%;
                box-sizing: border-box;
                height: 50px;
            }
            
            .currency-symbol {
                left: 20px;
                font-size: 1.1rem;
                color: #ffc107;
                font-weight: 700;
            }
            
            .bet-input-controls {
                right: 4px;
                gap: 8px;
                flex-direction: column;
                top: 50%;
                transform: translateY(-50%);
                position: absolute;
            }
            
            .bet-input-btn {
                width: 32px;
                height: 32px;
                font-size: 16px;
                border-radius: 6px;
                min-width: 32px;
                min-height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: #3c4043;
                border: 1px solid #5a5d65;
                color: #fff;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.2s ease;
                box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            }
            
            .bet-input-btn:hover {
                background: #5a5d65;
                transform: scale(1.05);
            }
            
            .bet-input-btn:active {
                transform: scale(0.95);
                background: #ff4757;
            }
            
            .bet-input-label {
                top: -22px;
                font-size: 0.65rem;
            }
            
            .bet-button {
                width: 100%;
                padding: 12px;
                font-size: 1.1rem;
                border-radius: 6px;
            }
            
            .countdown-bar {
                width: 90%;
                height: 35px;
                border-radius: 6px;
            }
            
            .countdown-content {
                font-size: 14px;
            }
            
            .countdown-text {
                font-size: 14px;
            }
            
            .countdown-timer {
                font-size: 14px;
            }

            
            .warning-content {
                padding: 25px 15px;
                margin: 8px;
                max-width: 95%;
                border-radius: 12px;
            }
            
            .warning-title {
                font-size: 1.3rem;
                margin-bottom: 12px;
            }
            
            .warning-subtitle {
                font-size: 1rem;
                margin-bottom: 20px;
            }
            
            .warning-description {
                font-size: 0.85rem;
                margin-bottom: 20px;
                line-height: 1.3;
            }
            
            .confirm-button {
                padding: 10px 25px;
                font-size: 0.9rem;
                border-radius: 8px;
            }
            
            .warning-icon {
                font-size: 3rem;
                margin: 0 auto 20px auto;
            }
        }

        @media (max-width: 768px) {
            body {
                font-size: 14px;
                overflow-x: hidden;
            }
            
            .header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
                padding: 10px 15px;
                gap: 10px;
            }
            
            .balance-display {
                flex-direction: row;
                align-items: center;
                gap: 8px;
            }
            
            .balance-label {
                font-size: 0.8rem;
            }
            
            .balance-amount {
                font-size: 1rem;
                padding: 6px 12px;
            }
            
            .game-container {
                padding: 10px;
                gap: 15px;
            }
            
            .stats-overlay {
                position: relative;
                top: auto;
                left: auto;
                justify-content: center;
                margin-bottom: 15px;
                flex-wrap: wrap;
                gap: 8px;
                order: 1;
            }
            
            .stat-item {
                padding: 8px 12px;
                min-width: 60px;
                flex: 1;
                max-width: 80px;
            }
            
            .stat-value {
                font-size: 1rem;
            }
            
            .stat-label {
                font-size: 0.6rem;
            }
            
            .stat-icon {
                font-size: 0.9rem;
            }

            .quick-bets {
                position: relative;
                top: auto;
                right: auto;
                justify-content: center;
                margin-bottom: 15px;
                order: 2;
                flex-wrap: wrap;
                gap: 8px;
            }
            
            .quick-bet {
                padding: 10px 16px;
                font-size: 0.8rem;
                min-width: 60px;
                flex: 1;
                max-width: 80px;
            }
            
            .canvas-container {
                height: 200px;
                margin-bottom: 15px;
                order: 3;
            }
            
            .multiplier-display {
                font-size: 2rem;
                top: 15px;
            }
            
            .history-section {
                margin: 15px 0;
                padding: 10px;
                order: 4;
            }
            
            .history-title {
                font-size: 0.8rem;
                margin-bottom: 8px;
            }
            
            .history-counters {
                gap: 6px;
                flex-wrap: nowrap;
                overflow-x: auto;
                padding: 5px 0;
                justify-content: flex-start;
            }
            
            .counter-item {
                padding: 6px 10px;
                font-size: 0.8rem;
                min-width: 50px;
                flex-shrink: 0;
            }
            
            .controls-container {
                flex-direction: column;
                width: 100%;
                gap: 15px;
                order: 5;
            }
            
            .bet-input-container {
                width: 100%;
            }
            
            .bet-input {
                font-size: 1.2rem;
                padding: 15px 50px 15px 50px;
            }
            
            .currency-symbol {
                left: 20px;
                font-size: 1rem;
            }
            
            .bet-input-controls {
                right: 12px;
            }
            
            .bet-input-btn {
                width: 18px;
                height: 18px;
                font-size: 11px;
            }
            
            .bet-input-label {
                top: -25px;
                font-size: 0.7rem;
            }
            
            .bet-button {
                width: 100%;
                padding: 15px;
                font-size: 1.2rem;
            }
            
            .countdown-bar {
                width: 90%;
                height: 40px;
            }
            
            .countdown-content {
                font-size: 16px;
            }
            
            .countdown-text {
                font-size: 16px;
            }
            
            .countdown-timer {
                font-size: 16px;
            }

            
            .warning-content {
                padding: 30px 20px;
                margin: 10px;
                max-width: 95%;
                border-radius: 15px;
            }
            
            .warning-title {
                font-size: 1.5rem;
                margin-bottom: 15px;
            }
            
            .warning-subtitle {
                font-size: 1.1rem;
                margin-bottom: 25px;
            }
            
            .warning-description {
                font-size: 0.9rem;
                margin-bottom: 25px;
                line-height: 1.4;
            }
            
            .confirm-button {
                padding: 12px 30px;
                font-size: 1rem;
            }
            
            .warning-icon {
                font-size: 3.5rem;
                margin: 0 auto 25px auto;
            }
        }
        
        /* Otimizações adicionais para dispositivos móveis muito fracos */
        @media (max-width: 360px) {
            /* Reduzir ainda mais as animações */
            *, *::before, *::after {
                animation-duration: 0.05s !important;
                transition-duration: 0.05s !important;
            }
            
            /* Desabilitar todos os efeitos visuais pesados */
            .mine-tile::before,
            .mines-option::before,
            .bet-button::before,
            .mines-start-btn::before,
            .mines-cashout-btn::before,
            .sidebar-menu-item::before {
                display: none !important;
            }
            
            /* Reduzir tamanhos para economizar espaço */
            .canvas-container {
                height: 150px;
            }
            
            .multiplier-display {
                font-size: 1.5rem;
            }
            
            .stat-item {
                padding: 4px 6px;
                min-width: 40px;
                max-width: 60px;
            }
            
            .stat-value {
                font-size: 0.8rem;
            }
            
            .stat-label {
                font-size: 0.4rem;
            }
        }

        @media (max-width: 480px) {
            .canvas-container {
                height: 180px;
            }
            
            .multiplier-display {
                font-size: 1.8rem;
                top: 10px;
            }
            
            .stats-overlay {
                gap: 6px;
            }
            
            .stat-item {
                padding: 6px 8px;
                min-width: 50px;
                max-width: 70px;
            }
            
            .stat-value {
                font-size: 0.9rem;
            }
            
            .stat-label {
                font-size: 0.5rem;
            }
            
            .quick-bet {
                padding: 8px 12px;
                font-size: 0.7rem;
                min-width: 50px;
                max-width: 70px;
            }
            
            .bet-input {
                font-size: 1.1rem;
                padding: 12px 45px 12px 45px;
            }
            
            .bet-button {
                padding: 12px;
                font-size: 1.1rem;
            }
            
            .history-counters {
                gap: 4px;
            }
            
            .counter-item {
                padding: 5px 8px;
                font-size: 0.7rem;
                min-width: 45px;
            }
            
            .warning-content {
                padding: 25px 15px;
            }
            
            .warning-title {
                font-size: 1.3rem;
            }
            
            .warning-subtitle {
                font-size: 1rem;
            }
            
            .warning-description {
                font-size: 0.8rem;
            }
            
            .confirm-button {
                padding: 10px 25px;
                font-size: 0.9rem;
            }
            
            .warning-icon {
                font-size: 3rem;
            }
            
            .countdown-bar {
                width: 85%;
                height: 35px;
            }
            
            .countdown-content {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar Toggle Arrow -->
    <div class="sidebar-toggle-arrow" id="sidebar-toggle-arrow"></div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebar-overlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <span class="sidebar-title">Menu</span>
            <button class="sidebar-close" id="sidebar-close">×</button>
        </div>

        <div class="sidebar-section">
            <div class="sidebar-section-title">Jogos</div>
            <ul class="sidebar-menu">
                <li class="sidebar-menu-item active" data-game="crash">
                    <span class="sidebar-menu-icon crash-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <!-- Linha curva ascendente simples -->
                            <path d="M4 18 Q12 6 20 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" fill="none"/>
                            <!-- Ponto final -->
                            <circle cx="20" cy="8" r="2" fill="currentColor"/>
                        </svg>
                    </span>
                    <span>Crash</span>
                </li>
                <li class="sidebar-menu-item" data-game="mines">
                    <span class="sidebar-menu-icon mines-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <!-- Grid 3x3 -->
                            <!-- Linha 1 -->
                            <rect x="2" y="2" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            <rect x="9" y="2" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            <rect x="16" y="2" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            
                            <!-- Linha 2 -->
                            <rect x="2" y="9" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            <rect x="9" y="9" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            <rect x="16" y="9" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            
                            <!-- Linha 3 -->
                            <rect x="2" y="16" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            <rect x="9" y="16" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            <rect x="16" y="16" width="6" height="6" fill="#1e2328" stroke="#5a5d65" stroke-width="0.5"/>
                            
                            <!-- Diamante dourado (tile seguro) -->
                            <g transform="translate(5, 5)">
                                <path d="M2 0L4 2L2 4L0 2Z" fill="#ffd700"/>
                                <path d="M2 0L3 1L2 2L1 1Z" fill="#ffed4e"/>
                            </g>
                            
                            <!-- Bomba vermelha (tile com bomba) -->
                            <g transform="translate(12, 12)">
                                <circle cx="2" cy="2" r="1.5" fill="#ff4757"/>
                                <rect x="1.5" y="0.5" width="1" height="1" fill="#ff6b7a"/>
                                <path d="M2 0.5L2.5 0L2.5 0.5Z" fill="#ff6b7a"/>
                            </g>
                            
                            <!-- Diamante dourado (tile seguro) -->
                            <g transform="translate(19, 19)">
                                <path d="M2 0L4 2L2 4L0 2Z" fill="#ffd700"/>
                                <path d="M2 0L3 1L2 2L1 1Z" fill="#ffed4e"/>
                            </g>
                        </svg>
                    </span>
                    <span>Mines</span>
                </li>
            </ul>
        </div>

    </aside>

    <!-- Main Content -->
    <div class="main-content" id="main-content">
        <div class="header">
            <div class="game-title">
                <div class="logo-icon">
                    <div class="flame">
                        <div class="dice">
                            <div class="pip"></div>
                            <div class="pip"></div>
                            <div class="pip"></div>
                            <div class="pip"></div>
                        </div>
                    </div>
                    <div class="sparkle"></div>
                    <div class="sparkle"></div>
                    <div class="sparkle"></div>
                    <div class="sparkle"></div>
                </div>
                <h1>BETetevm</h1>
            </div>
            
            <div class="balance-display">
                <span class="balance-label">Saldo:</span>
                <div class="balance-amount" id="balance-amount">R$ 100,00</div>
            </div>
        </div>

    <!-- Crash Game Container -->
    <div class="game-container" id="crash-game">
        <div class="stats-overlay">
            <div class="stat-item">
                <div class="stat-value" id="total-bets">0</div>
                <div class="stat-label">Apostas</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="total-wins">0</div>
                <div class="stat-label">Vitórias</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="win-rate">0%</div>
                <div class="stat-label">Taxa de Lucro</div>
            </div>
        </div>

        <div class="quick-bets">
            <button class="quick-bet" data-amount="50">R$ 50</button>
            <button class="quick-bet" data-amount="100">R$ 100</button>
            <button class="quick-bet" data-amount="250">R$ 250</button>
            <button class="quick-bet" data-amount="500">R$ 500</button>
        </div>

        <div class="canvas-container">
            <div class="multiplier-display" id="multiplier-display">1.00x</div>
            <div class="crash-display" id="crash-display">
                <div class="crash-multiplier" id="crash-multiplier">6,35X</div>
                <div class="crash-text">CRASH</div>
            </div>
            <canvas id="canvas"></canvas>
            
            <!-- Countdown Bar atrelado ao canvas-container -->
            <div class="countdown-bar" id="countdown-bar">
                <div class="countdown-progress" id="countdown-progress"></div>
                <div class="countdown-content">
                    <span class="countdown-text">Começando em</span>
                    <span class="countdown-timer" id="countdown-timer">3.0s</span>
                </div>
            </div>
        </div>

        <div class="history-section">
            <div class="history-title">HISTÓRICO DE APOSTAS</div>
            <div class="history-counters" id="last-counters"></div>
        </div>


        <div class="controls-container">
            <div class="bet-input-container">
                <label class="bet-input-label">Valor da Aposta</label>
                <span class="currency-symbol">R$</span>
                <input type="number" class="bet-input" id="bet-input" step="1" value="100" placeholder="Digite o valor">
                <div class="bet-input-controls">
                    <button class="bet-input-btn" id="bet-increase">+</button>
                    <button class="bet-input-btn" id="bet-decrease">−</button>
                </div>
            </div>
            <button class="bet-button" id="bet-button">Apostar</button>
        </div>
    </div>


    <!-- Mines Game Container -->
    <div class="game-container" id="mines-game" style="display: none;">
        <div class="mines-header">
            <div class="mines-info">
                <div class="mines-info-item">
                    <span class="mines-info-label">Minas:</span>
                    <span class="mines-info-value" id="mines-count">3</span>
                </div>
                <div class="mines-info-item">
                    <span class="mines-info-label">Multiplicador:</span>
                    <span class="mines-info-value multiplier-value" id="mines-multiplier">1.00x</span>
                </div>
                <div class="mines-info-item">
                    <span class="mines-info-label">Lucro Potencial:</span>
                    <span class="mines-info-value profit-value" id="mines-profit">R$ 0,00</span>
                </div>
            </div>
        </div>

        <div class="mines-grid-container">
            <div class="mines-grid" id="mines-grid">
                <!-- Grid 5x5 será gerado dinamicamente -->
            </div>
        </div>

        <div class="mines-controls">
            <div class="mines-settings">
                <div class="setting-group">
                    <label class="setting-label">Quantidade de Minas</label>
                    <div class="mines-selector">
                        <button class="mines-option active" data-mines="3">3</button>
                        <button class="mines-option" data-mines="5">5</button>
                        <button class="mines-option" data-mines="7">7</button>
                        <button class="mines-option" data-mines="10">10</button>
                        <button class="mines-option" data-mines="15">15</button>
                    </div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">Valor da Aposta</label>
                    <div class="bet-input-container">
                        <span class="currency-symbol">R$</span>
                        <input type="number" class="bet-input mines-bet-input" id="mines-bet-input" step="1" value="10" placeholder="Digite o valor">
                        <div class="bet-input-controls">
                            <button class="bet-input-btn" id="mines-bet-increase">+</button>
                            <button class="bet-input-btn" id="mines-bet-decrease">−</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mines-actions">
                <button class="bet-button mines-start-btn" id="mines-start-btn">Começar Jogo</button>
                <button class="bet-button cash-out mines-cashout-btn" id="mines-cashout-btn" style="display: none;">Retirar</button>
            </div>
        </div>
    </div>

    <!-- Modal de Aviso -->
    <div class="warning-modal" id="warning-modal">
        <div class="warning-content">
            <div class="warning-icon">⚠️</div>
            <div class="warning-title">Projeto Matemática FAETEC Visconde de Mauá</div>
            <div class="warning-subtitle">Jogo Educativo</div>
            <div class="warning-description">
                Este é um jogo desenvolvido exclusivamente para fins educativos e de demonstração matemática. 
                Não envolve dinheiro real e é destinado apenas ao aprendizado sobre probabilidades e estatísticas.
            </div>
            <button class="confirm-button" id="confirm-button">Entendi e Concordo</button>
        </div>
    </div>

    </div> <!-- End Main Content -->

    <!-- Botão de Créditos -->
    <button class="credits-button" id="credits-button">Créditos</button>

    <!-- Modal de Créditos -->
    <div class="credits-modal" id="credits-modal">
        <div class="credits-content">
            <button class="credits-close" id="credits-close">×</button>
            <div class="credits-title">Créditos</div>
            <div class="credits-subtitle">Desenvolvido por</div>
            
            <div class="credits-team">
                <div class="credits-label">Equipe de Desenvolvimento</div>
                <div class="credits-member">Lucas Guimarães</div>
                <div class="credits-member">Matheus Taylor</div>
                <div class="credits-member">Talles Cristovão</div>
                <div class="credits-member">Miguel Torres</div>
            </div>
            
            <div class="credits-school">
                <div class="credits-school-name">ETEVM</div>
                <div class="credits-class">Turma 1412</div>
            </div>
        </div>
    </div>


    <script>
        class AviatorGame {
            constructor() {
                this.initializeElements();
                this.initializeGameState();
                this.initializeCanvas();
                this.initializeEventListeners();
                this.loadGameData();
                this.updateCounterDisplay();
                this.startGame();
            }

            initializeElements() {
                this.canvas = document.getElementById('canvas');
                this.ctx = this.canvas.getContext('2d');
                this.multiplierDisplay = document.getElementById('multiplier-display');
                this.crashDisplay = document.getElementById('crash-display');
                this.crashMultiplierDisplay = document.getElementById('crash-multiplier');
                this.countdownBar = document.getElementById('countdown-bar');
                this.countdownTimer = document.getElementById('countdown-timer');
                this.balanceElement = document.getElementById('balance-amount');
                this.betButton = document.getElementById('bet-button');
                this.betInput = document.getElementById('bet-input');
                this.lastCounters = document.getElementById('last-counters');
                this.totalBetsElement = document.getElementById('total-bets');
                this.totalWinsElement = document.getElementById('total-wins');
                this.winRateElement = document.getElementById('win-rate');
                
            }

            initializeGameState() {
                this.balance = sharedBalance;
                this.currentMultiplier = 1.0;
                this.isFlying = false;
                this.hasPlacedBet = false;
                this.hasCashedOut = false;
                this.currentBetAmount = 0;
                this.animationId = null;
                this.countdownInterval = null;
                this.countdownTimeout = null; // Adicionar timeout do countdown
                this.isExploding = false;
                this.isPaused = false; // Controle de pausa
                this.isCountingDown = false; // Flag de countdown
                
                this.planeX = 0;
                this.planeY = 0;
                this.speedX = 3.5;
                this.dotPath = [];
                
                this.cameraX = 0;
                this.cameraY = 0;
                this.cameraFollowSpeed = 0.08;
                
                // Variáveis para controle de tempo
                this.gameStartTime = 0;
                this.gameDuration = 0;
                this.lastFrameTime = 0;
                this.deltaTime = 0;
                this.targetFPS = 60;
                this.frameTime = 1000 / this.targetFPS;
                
                // Cache de cores para performance
                this.colorCache = new Map();
                this.lastColorMultiplier = 0;
                this.cachedColors = null;
                
                this.stats = {
                    totalBets: 0,
                    totalWins: 0,
                    winRate: 0
                };
                
                this.counterHistory = [1.01, 18.45, 2.02, 5.21, 1.22, 1.25];
            }
            
            // Método para pausar o jogo
            pauseGame() {
                this.isPaused = true;
                
                // Parar countdown se estiver rodando
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                    this.countdownInterval = null;
                }
                
                // Cancelar timeout do countdown se existir
                if (this.countdownTimeout) {
                    clearTimeout(this.countdownTimeout);
                    this.countdownTimeout = null;
                }
                
                // Resetar flag de countdown
                this.isCountingDown = false;
                
                // Esconder countdown bar com animação
                if (this.countdownBar) {
                    this.countdownBar.classList.remove('show');
                    this.countdownBar.classList.add('hide');
                    
                    // Remover display:block após animação
                    setTimeout(() => {
                        if (this.isPaused) {
                            this.countdownBar.classList.remove('hide');
                            this.countdownBar.style.display = 'none';
                        }
                    }, 400);
                }
                
                // Cancelar animação se estiver rodando
                if (this.animationId) {
                    cancelAnimationFrame(this.animationId);
                    this.animationId = null;
                }
            }
            
            // Método para retomar o jogo
            resumeGame() {
                this.isPaused = false;
                
                // Limpar completamente o countdown ao retomar
                this.isCountingDown = false;
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                    this.countdownInterval = null;
                }
                if (this.countdownTimeout) {
                    clearTimeout(this.countdownTimeout);
                    this.countdownTimeout = null;
                }
                
                // Garantir que o countdown bar está limpo
                if (this.countdownBar) {
                    this.countdownBar.classList.remove('show', 'hide');
                    this.countdownBar.style.display = 'none';
                }
                
                // Se estava em countdown ou não estava em jogo, iniciar countdown
                if (!this.isFlying && !this.isExploding) {
                    this.startCountdownWithBar();
                } else if (this.isFlying) {
                    // Se estava voando, retomar o loop
                    this.lastFrameTime = 0;
                    this.animationId = requestAnimationFrame((time) => this.gameLoop(time));
                }
            }

            initializeCanvas() {
                this.resizeCanvas();
                
                // Detectar dispositivos com baixa performance
                this.isLowPerformance = this.detectLowPerformance();
                
                // Otimizações de canvas para melhor performance
                this.ctx.imageSmoothingEnabled = !this.isLowPerformance;
                this.ctx.imageSmoothingQuality = this.isLowPerformance ? 'low' : 'medium';
                
                // Debounce para resize (evitar múltiplas chamadas)
                let resizeTimeout;
                window.addEventListener('resize', () => {
                    clearTimeout(resizeTimeout);
                    resizeTimeout = setTimeout(() => {
                        if (!this.isFlying || this.isExploding) {
                            this.resizeCanvas();
                        }
                    }, 150);
                });
                
                // Listener para mudanças de orientação (mobile) com debounce
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => {
                        if (!this.isFlying || this.isExploding) {
                            this.resizeCanvas();
                        }
                    }, 300);
                });
            }
            
            detectLowPerformance() {
                // Detectar dispositivos com baixa performance baseado em várias características
                const isMobile = window.innerWidth <= 768;
                const isSmallScreen = window.innerWidth <= 360;
                const isOldDevice = navigator.userAgent.includes('Android 4') || 
                                  navigator.userAgent.includes('Android 5') ||
                                  navigator.userAgent.includes('iPhone OS 9') ||
                                  navigator.userAgent.includes('iPhone OS 10');
                const hasLowMemory = navigator.deviceMemory && navigator.deviceMemory <= 2;
                
                return isMobile && (isSmallScreen || isOldDevice || hasLowMemory);
            }

            resizeCanvas() {
                // Se o jogo está rodando, NÃO redimensionar para evitar problemas
                if (this.isFlying && !this.isExploding) {
                    return;
                }
                
                const container = this.canvas.parentElement;
                const newWidth = container.clientWidth;
                const newHeight = container.clientHeight;
                
                // Só redimensionar se não estiver rodando
                this.canvas.width = newWidth;
                this.canvas.height = newHeight;
                
                // Posicionar normalmente quando não está rodando
                this.planeX = 50;
                this.planeY = newHeight - 50;
                this.cameraX = 0;
                this.cameraY = 0;
            }

            initializeEventListeners() {
                this.betButton.addEventListener('click', () => this.handleBetButton());
                
                document.querySelectorAll('.quick-bet').forEach(button => {
                    button.addEventListener('click', (e) => {
                        const amount = e.target.dataset.amount;
                        this.betInput.value = amount;
                    });
                });
                
                // Botões de incremento/decremento
                document.getElementById('bet-increase').addEventListener('click', () => {
                    let value = parseInt(this.betInput.value) || 0;
                    this.betInput.value = (value + 10).toString();
                });
                
                document.getElementById('bet-decrease').addEventListener('click', () => {
                    let value = parseInt(this.betInput.value) || 0;
                    if (value > 10) {
                        this.betInput.value = (value - 10).toString();
                    }
                });
                
                this.betInput.addEventListener('keydown', (e) => {
                    const invalidChars = ['-', '+', 'e', 'E', '.', ','];
                    if (invalidChars.includes(e.key)) {
                        e.preventDefault();
                    }
                });

                this.betInput.addEventListener('input', (e) => {
                    let value = parseInt(e.target.value);
                    if (!isNaN(value)) {
                        e.target.value = value.toString();
                    }
                });

                // Efeito visual no input
                this.betInput.addEventListener('focus', () => {
                    this.betInput.style.transform = 'scale(1.02)';
                });

                this.betInput.addEventListener('blur', () => {
                    this.betInput.style.transform = 'scale(1)';
                });
            }

            calculateCrashChance() {
                // Chance de crash baseada no tempo com mais aleatoriedade
                if (this.gameDuration < 3) {
                    return 0.0002; // Chance muito baixa nos primeiros 3 segundos
                }
                
                // Adicionar aleatoriedade à chance base
                const randomFactor = (Math.random() - 0.5) * 0.001; // Variação aleatória de ±0.05%
                
                // Chance de crash aumenta progressivamente com o tempo
                let baseCrashChance;
                if (this.gameDuration < 8) {
                    // 3-8 segundos - chance baixa com aleatoriedade
                    baseCrashChance = 0.0005 + ((this.gameDuration - 3) * 0.0003);
                } else if (this.gameDuration < 15) {
                    // 8-15 segundos - chance moderada com aleatoriedade
                    baseCrashChance = 0.002 + ((this.gameDuration - 8) * 0.0008);
                } else if (this.gameDuration < 25) {
                    // 15-25 segundos - chance alta com aleatoriedade
                    baseCrashChance = 0.0076 + ((this.gameDuration - 15) * 0.002);
                } else if (this.gameDuration < 40) {
                    // 25-40 segundos - chance muito alta com aleatoriedade
                    baseCrashChance = 0.0276 + ((this.gameDuration - 25) * 0.004);
                } else {
                    // Acima de 40 segundos - chance extremamente alta com aleatoriedade
                    baseCrashChance = 0.0876 + ((this.gameDuration - 40) * 0.006);
                }
                
                // Aplicar aleatoriedade e garantir valor mínimo
                const finalChance = Math.max(0.0001, baseCrashChance + randomFactor);
                
                return Math.min(finalChance, 0.4); // Máximo 40% de chance por frame
            }


            updateDisplay() {
                this.multiplierDisplay.textContent = this.currentMultiplier.toFixed(2) + 'x';
                this.balanceElement.textContent = 'R$ ' + this.balance.toLocaleString('pt-BR', { 
                    minimumFractionDigits: 2, 
                    maximumFractionDigits: 2 
                });
                
                // Atualizar saldo compartilhado
                sharedBalance = this.balance;
                
                // Atualizar cor do multiplicador para combinar com a cor da trilha (Branco -> Laranja -> Vermelho)
                const colors = this.getSmoothColor(this.currentMultiplier);
                this.multiplierDisplay.style.color = colors.solid;
            }

            updateStats() {
                this.totalBetsElement.textContent = this.stats.totalBets;
                this.totalWinsElement.textContent = this.stats.totalWins;
                this.stats.winRate = this.stats.totalBets > 0 ? (this.stats.totalWins / this.stats.totalBets * 100) : 0;
                this.winRateElement.textContent = this.stats.winRate.toFixed(1) + '%';
            }

            updateCounterDisplay() {
                this.lastCounters.innerHTML = this.counterHistory.slice(0, 6).map((counter, index) => {
                    let className = 'blueBorder';
                    if (counter >= 2 && counter < 10) className = 'purpleBorder';
                    else if (counter >= 10) className = 'burgundyBorder';
                    
                    // Apenas o primeiro item (mais recente) recebe animação de entrada
                    const animationClass = index === 0 ? 'slide-in-from-left' : '';
                    return `<div class="counter-item ${className} ${animationClass}">${counter.toFixed(2)}x</div>`;
                }).join('');
            }

            updateCounterDisplayWithAnimation() {
                // Primeiro, animar a saída do último item (se existir)
                const lastItem = this.lastCounters.querySelector('.counter-item:last-child');
                if (lastItem) {
                    lastItem.classList.add('slide-out-to-right');
                    
                    // Após a animação de saída, remover o último item e adicionar o novo
                    setTimeout(() => {
                        // Remover o último item
                        lastItem.remove();
                        
                        // Adicionar o novo item no início
                        const newMultiplier = this.counterHistory[0];
                        let className = 'blueBorder';
                        if (newMultiplier >= 2 && newMultiplier < 10) className = 'purpleBorder';
                        else if (newMultiplier >= 10) className = 'burgundyBorder';
                        
                        const newItem = document.createElement('div');
                        newItem.className = `counter-item ${className} slide-in-from-left`;
                        newItem.textContent = `${newMultiplier.toFixed(2)}x`;
                        
                        // Inserir no início do container
                        this.lastCounters.insertBefore(newItem, this.lastCounters.firstChild);
                    }, 300); // Duração da animação de saída
                } else {
                    // Se não há itens, adicionar o primeiro item
                    const newMultiplier = this.counterHistory[0];
                    let className = 'blueBorder';
                    if (newMultiplier >= 2 && newMultiplier < 10) className = 'purpleBorder';
                    else if (newMultiplier >= 10) className = 'burgundyBorder';
                    
                    const newItem = document.createElement('div');
                    newItem.className = `counter-item ${className} slide-in-from-left`;
                    newItem.textContent = `${newMultiplier.toFixed(2)}x`;
                    
                    this.lastCounters.appendChild(newItem);
                }
            }

            handleBetButton() {
                if (this.hasPlacedBet && this.isFlying) {
                    this.cashOut();
                } else if (!this.isFlying && !this.isExploding) {
                    this.placeBet();
                }
            }

            placeBet() {
                const betAmount = parseInt(this.betInput.value);
                
                if (!betAmount || betAmount <= 0 || betAmount > this.balance || this.isFlying) {
                    // Simply do nothing - don't place bet for invalid amounts
                    return;
                }
                
                this.balance -= betAmount;
                this.currentBetAmount = betAmount;
                this.hasPlacedBet = true;
                this.hasCashedOut = false;
                this.stats.totalBets++;
                
                this.betButton.textContent = 'Retirar';
                this.betButton.classList.add('cash-out');
                
                this.updateDisplay();
                this.updateStats();
                this.saveGameData();
            }

            cashOut() {
                if (!this.hasPlacedBet || this.hasCashedOut) return;
                
                const winAmount = this.currentBetAmount * this.currentMultiplier;
                this.balance += winAmount;
                this.hasCashedOut = true;
                this.stats.totalWins++;
                
                this.betButton.textContent = 'Apostar';
                this.betButton.classList.remove('cash-out');
                
                this.updateDisplay();
                this.updateStats();
                this.saveGameData();
            }


            // Função para interpolar entre duas cores
            interpolateColor(color1, color2, factor) {
                const result = color1.slice();
                for (let i = 0; i < 3; i++) {
                    result[i] = Math.round(result[i] + factor * (color2[i] - result[i]));
                }
                return result;
            }

            // Obter transição suave de cor com base no multiplicador (com cache)
            getSmoothColor(multiplier) {
                // Cache de cores para evitar recalcular a cada frame
                const multiplierRounded = Math.floor(multiplier * 10) / 10; // Arredondar para 1 casa decimal
                
                if (this.lastColorMultiplier === multiplierRounded && this.cachedColors) {
                    return this.cachedColors;
                }
                
                // Definir cores
                const white = [255, 255, 255];  // #ffffff
                const orange = [255, 165, 0];   // #ffa500  
                const red = [255, 71, 87];      // #ff4757

                let color;

                if (multiplier < 2) {
                    // Transição de branco para laranja
                    const factor = Math.max(0, Math.min(1, (multiplier - 1) / 1));
                    color = this.interpolateColor(white, orange, factor);
                } else if (multiplier < 5) {
                    // Transição de laranja para vermelho
                    const factor = Math.max(0, Math.min(1, (multiplier - 2) / 3));
                    color = this.interpolateColor(orange, red, factor);
                } else {
                    // Permanecer vermelho para 5x+
                    color = red;
                }

                this.lastColorMultiplier = multiplierRounded;
                this.cachedColors = {
                    solid: `rgb(${color[0]}, ${color[1]}, ${color[2]})`,
                    transparent: `rgba(${color[0]}, ${color[1]}, ${color[2]}, 0.3)`,
                    rgb: color
                };
                
                return this.cachedColors;
            }


            updateCamera() {
                if (this.isFlying && !this.isExploding) {
                    // Seguir câmera - centralizar no avião
                    const targetCameraX = this.planeX - this.canvas.width / 2;
                    const targetCameraY = this.planeY - this.canvas.height / 2;
                    
                    // Interpolar suavemente a posição da câmera baseado em tempo real
                    // Ajustar a velocidade para ser independente de FPS (60 FPS como referência)
                    const cameraFollowSpeedAdjusted = 1 - Math.pow(1 - this.cameraFollowSpeed, this.deltaTime * 60);
                    this.cameraX += (targetCameraX - this.cameraX) * cameraFollowSpeedAdjusted;
                    this.cameraY += (targetCameraY - this.cameraY) * cameraFollowSpeedAdjusted;
                }
            }

            draw() {
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Desenhar fundo azul-acinzentado
                this.ctx.fillStyle = '#1e2328';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                if (!this.isFlying && !this.isExploding) return;
                
                // Salvar a matriz de transformação atual
                this.ctx.save();
                
                // Aplicar transformação da câmera (sem escala)
                this.ctx.translate(-this.cameraX, -this.cameraY);
                
                if (!this.isExploding) {
                    // Update plane position baseado em tempo real (não em frames)
                    const speedXPerSecond = 210; // Pixels por segundo
                    this.planeX += speedXPerSecond * this.deltaTime;
                    
                    // Blaze-inspired trajectory: starts very flat, then exponential curve
                    const timeProgress = this.planeX / 200; // Time-based progress
                    const multiplierProgress = Math.log(this.currentMultiplier) / Math.log(10); // Logarithmic multiplier progress
                    
                    // Very flat start with exponential acceleration (like Blaze)
                    const flatStart = Math.pow(this.currentMultiplier - 1, 0.3) * 5; // Very gentle initial rise
                    const exponentialRise = Math.pow(this.currentMultiplier - 1, 2.8) * 35; // Strong exponential component
                    const timeBasedCurve = Math.pow(timeProgress, 1.5) * 15; // Time-based curvature
                    
                    this.planeY = this.canvas.height - 80 - flatStart - exponentialRise - timeBasedCurve;
                    
                    // Add to path
                    this.dotPath.push({ x: this.planeX, y: this.planeY });
                    
                    // Keep path length reasonable for performance (reduzido em mobile)
                    const maxPathLength = this.isLowPerformance ? 50 : (window.innerWidth <= 768 ? 80 : 120);
                    if (this.dotPath.length > maxPathLength) {
                        this.dotPath.shift();
                    }
                }
                
                // Draw trail with smooth color transitions (otimizado)
                if (this.dotPath.length > 1) {
                    const isMobile = window.innerWidth <= 768;
                    
                    this.ctx.lineWidth = this.isLowPerformance ? 2 : (isMobile ? 3 : 4);
                    this.ctx.lineCap = 'round';
                    this.ctx.lineJoin = 'round';
                    
                    // Get color once para todo o path (mais eficiente)
                    const colors = this.getSmoothColor(this.currentMultiplier);
                    const rgb = colors.rgb;
                    
                    // Desenhar em um único path para melhor performance
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.dotPath[0].x, this.dotPath[0].y);
                    
                    // Otimização para mobile: reduzir pontos da trilha
                    const stepSize = this.isLowPerformance ? 3 : (isMobile ? 2 : 1);
                    for (let i = stepSize; i < this.dotPath.length; i += stepSize) {
                        this.ctx.lineTo(this.dotPath[i].x, this.dotPath[i].y);
                    }
                    
                    // Aplicar gradiente de opacidade com strokeStyle único
                    const gradient = this.ctx.createLinearGradient(
                        this.dotPath[0].x, 
                        this.dotPath[0].y,
                        this.dotPath[this.dotPath.length - 1].x,
                        this.dotPath[this.dotPath.length - 1].y
                    );
                    
                    gradient.addColorStop(0, `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]}, 0.3)`);
                    gradient.addColorStop(0.5, `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]}, 0.7)`);
                    gradient.addColorStop(1, `rgba(${rgb[0]}, ${rgb[1]}, ${rgb[2]}, 1)`);
                    
                    this.ctx.strokeStyle = gradient;
                    this.ctx.stroke();
                }
                
                // Draw point with smooth color transitions
                if (this.isExploding) {
                    // Get smooth color for explosion
                    const colors = this.getSmoothColor(this.currentMultiplier);
                    
                    // Convert solid color to rgba with 0.5 opacity for explosion effect
                    const rgbMatch = colors.solid.match(/rgb\((\d+), (\d+), (\d+)\)/);
                    let explosionColorRgba = 'rgba(255, 71, 87, 0.5)';
                    if (rgbMatch) {
                        const [, r, g, b] = rgbMatch;
                        explosionColorRgba = `rgba(${r}, ${g}, ${b}, 0.5)`;
                    }
                    
                    // Draw explosion as larger circle
                    this.ctx.fillStyle = colors.solid;
                    this.ctx.beginPath();
                    this.ctx.arc(this.planeX, this.planeY, 15, 0, 2 * Math.PI);
                    this.ctx.fill();
                    
                    // Add pulsing effect for explosion (reduzido em mobile)
                    const isMobile = window.innerWidth <= 768;
                    if (!isMobile) {
                        this.ctx.fillStyle = explosionColorRgba;
                        this.ctx.beginPath();
                        this.ctx.arc(this.planeX, this.planeY, 25, 0, 2 * Math.PI);
                        this.ctx.fill();
                    }
                } else if (this.isFlying) {
                    // Get smooth colors for the point
                    const colors = this.getSmoothColor(this.currentMultiplier);
                    
                    // Draw main point with smooth color
                    this.ctx.fillStyle = colors.solid;
                    this.ctx.beginPath();
                    this.ctx.arc(this.planeX, this.planeY, 8, 0, 2 * Math.PI);
                    this.ctx.fill();
                    
                    // Add glow effect with matching transparent color (reduzido em mobile)
                    const isMobile = window.innerWidth <= 768;
                    if (!isMobile) {
                        this.ctx.fillStyle = colors.transparent;
                        this.ctx.beginPath();
                        this.ctx.arc(this.planeX, this.planeY, 12, 0, 2 * Math.PI);
                        this.ctx.fill();
                    }
                }
                
                // Restore the transformation matrix
                this.ctx.restore();
            }

            gameLoop(currentTime) {
                if (!this.isFlying && !this.isExploding) return;
                if (this.isPaused) return; // Parar se estiver pausado
                
                // Otimização para dispositivos móveis fracos - reduzir FPS
                const isMobile = window.innerWidth <= 768;
                const targetFPS = this.isLowPerformance ? 20 : (isMobile ? 30 : 60);
                const frameInterval = 1000 / targetFPS;
                
                // Calcular deltaTime (tempo desde o último frame em segundos)
                if (this.lastFrameTime === 0) {
                    this.lastFrameTime = currentTime;
                }
                
                // Skip frame se não passou tempo suficiente (limitação de FPS)
                if (currentTime - this.lastFrameTime < frameInterval) {
                    this.animationId = requestAnimationFrame((time) => this.gameLoop(time));
                    return;
                }
                
                this.deltaTime = (currentTime - this.lastFrameTime) / 1000; // Converter para segundos
                this.lastFrameTime = currentTime;
                
                // Limitar deltaTime para evitar grandes saltos (ex: quando a aba perde foco)
                this.deltaTime = Math.min(this.deltaTime, 0.1);
                
                if (!this.isExploding) {
                    // Atualizar duração do jogo baseado em tempo real
                    this.gameDuration = (currentTime - this.gameStartTime) / 1000;
                    
                    // Update multiplier baseado em tempo real (não em frames)
                    const baseIncrementPerSecond = 0.09; // Incremento por segundo
                    const accelerationPerSecond = Math.pow(this.currentMultiplier - 1, 0.8) * 0.06;
                    this.currentMultiplier += (baseIncrementPerSecond + accelerationPerSecond) * this.deltaTime;
                    
                    // Chance de crash baseada no tempo
                    const crashChance = this.calculateCrashChance();
                    if (Math.random() < crashChance) {
                        this.triggerCrash();
                        return;
                    }
                    
                    // Reduzir frequência de atualização de display em mobile
                    if (!isMobile || Math.floor(currentTime / 100) !== Math.floor((currentTime - this.deltaTime * 1000) / 100)) {
                        this.updateDisplay();
                    }
                }
                
                // Update camera to follow the plane
                this.updateCamera();
                
                this.draw();
                this.animationId = requestAnimationFrame((time) => this.gameLoop(time));
            }

            triggerCrash() {
                this.isFlying = false;
                this.isExploding = true;
                
                // Hide multiplier display and show crash display
                this.multiplierDisplay.style.display = 'none';
                this.crashDisplay.style.display = 'block';
                this.crashMultiplierDisplay.textContent = this.currentMultiplier.toFixed(2).replace('.', ',') + 'X';
                
                // Clear the canvas and remove the trail line immediately
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.fillStyle = '#1e2328';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Clear the dot path to remove the trail
                this.dotPath = [];
                
                // Reset bet button to "Apostar" state when crashing
                this.betButton.textContent = 'Apostar';
                this.betButton.classList.remove('cash-out');
                
                
                // Add to history
                this.counterHistory.unshift(parseFloat(this.currentMultiplier.toFixed(2)));
                this.counterHistory = this.counterHistory.slice(0, 6);
                
                this.updateCounterDisplayWithAnimation();
                this.saveGameData();
                
                // Show crash display for 2 seconds then hide and start countdown
                setTimeout(() => {
                    this.isExploding = false;
                    this.crashDisplay.style.display = 'none';
                    // Keep multiplier display hidden after crash
                    this.multiplierDisplay.style.display = 'none';
                    
                    // Clear the canvas completely again
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                    this.ctx.fillStyle = '#1e2328';
                    this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                    
                    // Start countdown with bar
                    this.startCountdownWithBar();
                }, 2000);
            }

            startCountdownWithBar() {
                if (this.isPaused) return; // Não iniciar se estiver pausado
                
                // Limpar qualquer countdown anterior
                if (this.countdownInterval) {
                    clearInterval(this.countdownInterval);
                    this.countdownInterval = null;
                }
                if (this.countdownTimeout) {
                    clearTimeout(this.countdownTimeout);
                    this.countdownTimeout = null;
                }
                
                this.isCountingDown = true;
                let countdownTime = 3.0;
                const totalTime = 3.0;
                
                // Remover todas as classes e resetar estado
                this.countdownBar.classList.remove('hide', 'show');
                
                // Tornar visível primeiro sem animação
                this.countdownBar.style.display = 'block';
                
                // Inicializar valores
                this.countdownTimer.textContent = countdownTime.toFixed(1) + 's';
                const progressBar = document.getElementById('countdown-progress');
                progressBar.style.width = '100%';
                
                // Usar requestAnimationFrame para garantir que a animação funcione
                requestAnimationFrame(() => {
                    if (!this.isPaused) {
                        this.countdownBar.classList.add('show');
                    }
                });
                
                this.countdownInterval = setInterval(() => {
                    if (this.isPaused) {
                        clearInterval(this.countdownInterval);
                        this.countdownInterval = null;
                        return;
                    }
                    
                    countdownTime -= 0.1;
                    this.countdownTimer.textContent = countdownTime.toFixed(1) + 's';
                    
                    // Atualizar largura da barra de progresso
                    const progressPercentage = (countdownTime / totalTime) * 100;
                    progressBar.style.width = progressPercentage + '%';
                    
                    if (countdownTime <= 0) {
                        clearInterval(this.countdownInterval);
                        this.countdownInterval = null;
                        
                        // Verificar se não foi pausado antes de continuar
                        if (this.isPaused) {
                            return;
                        }
                        
                        // Animação de fade out antes de iniciar a rodada
                        this.countdownBar.classList.remove('show');
                        this.countdownBar.classList.add('hide');
                        
                        this.countdownTimeout = setTimeout(() => {
                            // Verificar novamente se não foi pausado durante o timeout
                            if (this.isPaused) {
                                return;
                            }
                            
                            this.countdownBar.classList.remove('hide');
                            this.countdownBar.style.display = 'none';
                            this.isCountingDown = false;
                            this.countdownTimeout = null;
                            this.startNewRound();
                        }, 400);
                    }
                }, 100);
            }

            startNewRound() {
                // Não iniciar se estiver pausado
                if (this.isPaused) {
                    return;
                }
                
                // Redimensionar canvas antes de começar nova rodada
                this.resizeCanvas();
                
                this.currentMultiplier = 1.0;
                this.planeX = 50;
                this.planeY = this.canvas.height - 50;
                this.dotPath = [];
                this.lastFrameTime = 0; // Resetar tempo do frame
                
                // Hide multiplier display at the start of new round
                this.multiplierDisplay.style.display = 'none';
                
                // Only reset bet state if there was no active bet
                if (!this.hasPlacedBet || this.hasCashedOut) {
                    this.hasPlacedBet = false;
                    this.hasCashedOut = false;
                    this.currentBetAmount = 0;
                    this.betButton.textContent = 'Apostar';
                    this.betButton.classList.remove('cash-out');
                } else {
                    // Keep the bet active and show retirar button
                    this.betButton.textContent = 'Retirar';
                    this.betButton.classList.add('cash-out');
                }
                
                // Reset camera position for new round
                this.cameraX = 0;
                this.cameraY = 0;
                
                
                // Clear canvas
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                this.ctx.fillStyle = '#1e2328';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                // Start flying immediately (countdown was handled by Blaze-style bar)
                this.startFlying();
            }

            startFlying() {
                this.isFlying = true;
                this.lastFrameTime = 0; // Resetar para evitar grandes deltaTime no primeiro frame
                
                // Show multiplier display imediatamente
                this.multiplierDisplay.style.display = 'block';
                
                this.animationId = requestAnimationFrame((time) => {
                    this.gameStartTime = time; // Inicializar tempo de início
                    this.gameDuration = 0;
                    this.gameLoop(time);
                });
            }

            startGame() {
                this.startCountdownWithBar();
            }

            saveGameData() {
                const gameData = {
                    balance: this.balance,
                    stats: this.stats,
                    counterHistory: this.counterHistory
                };
                this.savedData = gameData;
            }

            loadGameData() {
                if (this.savedData) {
                    this.balance = this.savedData.balance || 100;
                    this.stats = this.savedData.stats || { totalBets: 0, totalWins: 0, winRate: 0 };
                    this.counterHistory = this.savedData.counterHistory || this.counterHistory;
                }
                this.updateDisplay();
                this.updateStats();
            }
        }

        // Shared balance between games
        let sharedBalance = 100;

        // Mines Game Class
        class MinesGame {
            constructor() {
                this.balance = sharedBalance;
                this.minesCount = 3;
                this.betAmount = 0;
                this.gameActive = false;
                this.revealedTiles = 0;
                this.currentMultiplier = 1.0;
                this.gridSize = 25;
                this.minePositions = [];
                this.revealedPositions = [];
                
                this.initializeElements();
                this.initializeGrid(true); // Animar na primeira vez
                this.initializeEventListeners();
                this.balance = sharedBalance; // Sincronizar com saldo compartilhado
                this.updateBalance();
            }

            initializeElements() {
                this.gridElement = document.getElementById('mines-grid');
                this.balanceElement = document.getElementById('balance-amount');
                this.multiplierElement = document.getElementById('mines-multiplier');
                this.profitElement = document.getElementById('mines-profit');
                this.minesCountElement = document.getElementById('mines-count');
                this.betInput = document.getElementById('mines-bet-input');
                this.startBtn = document.getElementById('mines-start-btn');
                this.cashoutBtn = document.getElementById('mines-cashout-btn');
            }

            initializeGrid(animate = false) {
                this.gridElement.innerHTML = '';
                for (let i = 0; i < this.gridSize; i++) {
                    const tile = document.createElement('div');
                    tile.classList.add('mine-tile');
                    if (animate) {
                        tile.classList.add('animate');
                    }
                    tile.dataset.index = i;
                    tile.addEventListener('click', () => this.revealTile(i));
                    this.gridElement.appendChild(tile);
                }
            }

            initializeEventListeners() {
                // Mines selector
                document.querySelectorAll('.mines-option').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        if (this.gameActive) return;
                        document.querySelectorAll('.mines-option').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.minesCount = parseInt(e.target.dataset.mines);
                        this.minesCountElement.textContent = this.minesCount;
                    });
                });

                // Bet controls
                document.getElementById('mines-bet-increase').addEventListener('click', () => {
                    if (!this.gameActive) {
                        let value = parseInt(this.betInput.value) || 0;
                        this.betInput.value = (value + 10).toString();
                    }
                });

                document.getElementById('mines-bet-decrease').addEventListener('click', () => {
                    if (!this.gameActive) {
                        let value = parseInt(this.betInput.value) || 0;
                        if (value > 10) {
                            this.betInput.value = (value - 10).toString();
                        }
                    }
                });

                // Start and cashout buttons
                this.startBtn.addEventListener('click', () => this.startGame());
                this.cashoutBtn.addEventListener('click', () => this.cashOut());
            }

            startGame() {
                const betAmount = parseInt(this.betInput.value);
                
                if (!betAmount || betAmount <= 0 || betAmount > this.balance) {
                    return;
                }

                this.betAmount = betAmount;
                this.balance -= betAmount;
                this.gameActive = true;
                this.revealedTiles = 0;
                this.currentMultiplier = 1.0;
                this.revealedPositions = [];
                
                // Generate random mine positions
                this.minePositions = [];
                while (this.minePositions.length < this.minesCount) {
                    const pos = Math.floor(Math.random() * this.gridSize);
                    if (!this.minePositions.includes(pos)) {
                        this.minePositions.push(pos);
                    }
                }

                this.initializeGrid(false); // Sem animação durante o jogo
                this.startBtn.style.display = 'none';
                this.cashoutBtn.style.display = 'block';
                this.betInput.disabled = true;
                
                this.updateBalance();
                this.updateMultiplier();
            }

            revealTile(index) {
                if (!this.gameActive || this.revealedPositions.includes(index)) {
                    return;
                }

                const tile = this.gridElement.children[index];
                tile.classList.add('revealed');
                this.revealedPositions.push(index);

                if (this.minePositions.includes(index)) {
                    // Hit a mine!
                    tile.classList.add('bomb');
                    tile.innerHTML = `
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <circle cx="10" cy="10" r="6" fill="#ffd700"/>
                            <rect x="8" y="4" width="4" height="3" fill="#ffed4e"/>
                            <path d="M10 4L11 2L11 4Z" fill="#ffed4e"/>
                        </svg>
                    `;
                    this.gameOver(false);
                } else {
                    // Found a diamond!
                    tile.classList.add('diamond');
                    tile.innerHTML = `
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <path d="M10 2L16 8L10 14L4 8L10 2Z" fill="#ff4757"/>
                            <path d="M10 2L13 5L10 8L7 5L10 2Z" fill="#ff6b7a"/>
                        </svg>
                    `;
                    this.revealedTiles++;
                    this.calculateMultiplier();
                    this.updateMultiplier();
                }
            }

            calculateMultiplier() {
                // Calculate multiplier based on revealed tiles and mines
                const safeSpots = this.gridSize - this.minesCount;
                
                // Fórmula com house edge (margem da casa) como na Blaze
                let multiplier = 1.0;
                const houseEdge = 0.97; // 3% de margem da casa (97% RTP) - mais justo
                
                for (let i = 0; i < this.revealedTiles; i++) {
                    const tilesRestantes = this.gridSize - i;
                    const safeSpotsRestantes = safeSpots - i;
                    // Multiplicador com ajuste
                    multiplier *= (tilesRestantes / safeSpotsRestantes) * houseEdge;
                }
                
                // Garantir multiplicador mínimo de 1.0 para o primeiro clique
                if (this.revealedTiles === 1 && multiplier < 1.0) {
                    multiplier = 1.0;
                }
                
                // Limitar multiplicador máximo para 1000x (realista)
                if (multiplier > 1000) {
                    multiplier = 1000;
                }
                
                this.currentMultiplier = multiplier;
            }

            cashOut() {
                if (!this.gameActive) return;
                
                const winAmount = this.betAmount * this.currentMultiplier;
                this.balance += winAmount;
                
                this.gameOver(true);
            }

            gameOver(won) {
                this.gameActive = false;
                this.startBtn.style.display = 'block';
                this.cashoutBtn.style.display = 'none';
                this.betInput.disabled = false;
                
                // Desabilitar botão de início com cooldown
                this.startBtn.disabled = true;
                this.startBtn.style.opacity = '0.5';
                this.startBtn.style.cursor = 'not-allowed';

                // Reveal all tiles with animation
                let delay = 0;
                for (let i = 0; i < this.gridSize; i++) {
                    const tile = this.gridElement.children[i];
                    if (!this.revealedPositions.includes(i)) {
                        setTimeout(() => {
                            tile.classList.add('revealed', 'disabled', 'reveal-animate');
                            if (this.minePositions.includes(i)) {
                                tile.classList.add('bomb');
                                tile.innerHTML = `
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                        <circle cx="10" cy="10" r="6" fill="#ffd700"/>
                                        <rect x="8" y="4" width="4" height="3" fill="#ffed4e"/>
                                        <path d="M10 4L11 2L11 4Z" fill="#ffed4e"/>
                                    </svg>
                                `;
                            } else {
                                tile.innerHTML = `
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                        <path d="M10 2L16 8L10 14L4 8L10 2Z" fill="#ff4757"/>
                                        <path d="M10 2L13 5L10 8L7 5L10 2Z" fill="#ff6b7a"/>
                                    </svg>
                                `;
                            }
                        }, delay);
                        delay += 30; // 30ms entre cada tile
                    }
                }

                this.updateBalance();
                sharedBalance = this.balance;

                // Cooldown de 2 segundos antes de poder jogar novamente
                setTimeout(() => {
                    this.startBtn.disabled = false;
                    this.startBtn.style.opacity = '1';
                    this.startBtn.style.cursor = 'pointer';
                }, 2000);

                // Esconder tiles com animação cascata reversa antes de resetar
                setTimeout(() => {
                    let hideDelay = 0;
                    for (let i = 0; i < this.gridSize; i++) {
                        const tile = this.gridElement.children[i];
                        setTimeout(() => {
                            tile.classList.add('hide-animate');
                        }, hideDelay);
                        hideDelay += 30; // 30ms entre cada tile
                    }
                }, 2200); // Começa após 2.2s

                setTimeout(() => {
                    this.initializeGrid(false); // Resetar grid após animação de esconder
                    
                    // Resetar cores do multiplicador e lucro para branco após todas as animações
                    this.multiplierElement.classList.remove('white', 'yellow', 'orange', 'red');
                    this.multiplierElement.classList.add('white');
                    this.multiplierElement.textContent = '1.00x';
                    this.profitElement.classList.remove('white', 'green');
                    this.profitElement.classList.add('white');
                    this.profitElement.textContent = 'R$ 0,00';
                }, 3000);
            }

            updateBalance() {
                sharedBalance = this.balance;
                this.balanceElement.textContent = 'R$ ' + this.balance.toLocaleString('pt-BR', { 
                    minimumFractionDigits: 2, 
                    maximumFractionDigits: 2 
                });
            }

            updateMultiplier() {
                this.multiplierElement.textContent = this.currentMultiplier.toFixed(2) + 'x';
                
                // Aplicar cores dinâmicas ao multiplicador (como no Crash)
                this.multiplierElement.classList.remove('white', 'yellow', 'orange', 'red');
                if (this.currentMultiplier < 1.5) {
                    this.multiplierElement.classList.add('white');
                } else if (this.currentMultiplier < 2.5) {
                    this.multiplierElement.classList.add('yellow');
                } else if (this.currentMultiplier < 5.0) {
                    this.multiplierElement.classList.add('orange');
                } else {
                    this.multiplierElement.classList.add('red');
                }
                
                const profit = (this.betAmount * this.currentMultiplier) - this.betAmount;
                this.profitElement.textContent = 'R$ ' + profit.toLocaleString('pt-BR', { 
                    minimumFractionDigits: 2, 
                    maximumFractionDigits: 2 
                });
                
                // Aplicar cores dinâmicas ao lucro
                this.profitElement.classList.remove('white', 'green');
                if (profit > 0) {
                    this.profitElement.classList.add('green');
                } else {
                    this.profitElement.classList.add('white');
                }
            }
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', () => {
            let aviatorGame;
            let minesGame;
            let currentGame = 'crash';

            // Sidebar functionality
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebar-overlay');
            const sidebarClose = document.getElementById('sidebar-close');
            const sidebarToggleArrow = document.getElementById('sidebar-toggle-arrow');
            const mainContent = document.getElementById('main-content');
            const isMobile = window.innerWidth <= 768;

            // Toggle sidebar
            function toggleSidebar() {
                const currentIsMobile = window.innerWidth <= 768;
                sidebar.classList.toggle('closed');
                sidebarToggleArrow.classList.toggle('closed');
                
                if (currentIsMobile) {
                    sidebarOverlay.classList.toggle('show');
                } else {
                    mainContent.classList.toggle('sidebar-closed');
                }
            }

            // Close sidebar
            function closeSidebar() {
                const currentIsMobile = window.innerWidth <= 768;
                sidebar.classList.add('closed');
                sidebarToggleArrow.classList.add('closed');
                
                if (currentIsMobile) {
                    sidebarOverlay.classList.remove('show');
                } else {
                    mainContent.classList.add('sidebar-closed');
                }
            }

            // Open sidebar
            function openSidebar() {
                const currentIsMobile = window.innerWidth <= 768;
                sidebar.classList.remove('closed');
                sidebarToggleArrow.classList.remove('closed');
                
                if (currentIsMobile) {
                    sidebarOverlay.classList.add('show');
                } else {
                    mainContent.classList.remove('sidebar-closed');
                }
            }

            // Initialize sidebar state - always start closed
            closeSidebar();

            // Event listeners
            sidebarClose.addEventListener('click', closeSidebar);
            sidebarToggleArrow.addEventListener('click', toggleSidebar);
            sidebarOverlay.addEventListener('click', closeSidebar);

            // Handle window resize
            window.addEventListener('resize', () => {
                const wasMobile = window.innerWidth <= 768;
                if (wasMobile !== isMobile) {
                    location.reload(); // Reload to reinitialize
                }
            });

            // Show warning modal every time
            const warningModal = document.getElementById('warning-modal');
            const confirmButton = document.getElementById('confirm-button');
            
            // Always show the modal
            warningModal.classList.remove('hidden');
            
            // Handle confirm button click
            confirmButton.addEventListener('click', () => {
                warningModal.classList.add('hidden');
                // Initialize crash game by default
                aviatorGame = new AviatorGame();
            });

            // Game navigation from sidebar
            document.querySelectorAll('.sidebar-menu-item[data-game]').forEach(btn => {
                btn.addEventListener('click', () => {
                    const game = btn.dataset.game;
                    
                    // Update active button in sidebar
                    document.querySelectorAll('.sidebar-menu-item[data-game]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    
                    // Close sidebar on mobile after selection
                    if (window.innerWidth <= 768) {
                        closeSidebar();
                    }
                    
                    // Update shared balance
                    if (currentGame === 'crash' && aviatorGame) {
                        sharedBalance = aviatorGame.balance;
                        // Pausar o jogo Crash
                        aviatorGame.pauseGame();
                    } else if (currentGame === 'mines' && minesGame) {
                        sharedBalance = minesGame.balance;
                    }
                    
                    // Show/hide games
                    if (game === 'crash') {
                        document.getElementById('crash-game').style.display = 'flex';
                        document.getElementById('mines-game').style.display = 'none';
                        document.getElementById('countdown-bar').style.display = 'block';
                        
                        if (aviatorGame) {
                            aviatorGame.balance = sharedBalance;
                            aviatorGame.updateDisplay();
                            // Retomar o jogo Crash
                            aviatorGame.resumeGame();
                        }
                        currentGame = 'crash';
                    } else if (game === 'mines') {
                        document.getElementById('crash-game').style.display = 'none';
                        document.getElementById('mines-game').style.display = 'flex';
                        document.getElementById('countdown-bar').style.display = 'none';
                        
                        if (!minesGame) {
                            minesGame = new MinesGame();
                        } else {
                            minesGame.balance = sharedBalance;
                            minesGame.updateBalance();
                        }
                        currentGame = 'mines';
                    }
                });
            });

            // Credits modal functionality
            const creditsButton = document.getElementById('credits-button');
            const creditsModal = document.getElementById('credits-modal');
            const creditsClose = document.getElementById('credits-close');

            creditsButton.addEventListener('click', () => {
                creditsModal.classList.add('show');
            });

            creditsClose.addEventListener('click', () => {
                creditsModal.classList.remove('show');
            });
        });
    </script>
</body>
</html>